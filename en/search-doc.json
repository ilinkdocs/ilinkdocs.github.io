{"searchDocs":[{"title":"ilink Knowledge Base","type":0,"sectionRef":"#","url":"/en/docs/","content":"","keywords":"","version":"Next"},{"title":"O que √© o ilink?‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#o-que-√©-o-ilink","content":" O ilink √© uma plataforma de integra√ß√£o que permite a comunica√ß√£o eficiente de faturas eletr√≥nicas entre diferentes sistemas e aplica√ß√µes. Com suporte a m√∫ltiplos protocolos e formatos de dados, o ilink facilita a troca de informa√ß√µes de forma segura e confi√°vel.  A plataforma oferece ferramentas para validar, transformar e encaminhar faturas eletr√≥nicas, garantindo conformidade com os requisitos legais e padr√µes do setor. Al√©m disso, disponibiliza funcionalidades de monitoriza√ß√£o e auditoria, permitindo acompanhar o estado das transa√ß√µes e identificar rapidamente quaisquer problemas na comunica√ß√£o entre sistemas.  Clique aqui para consultar a lista de sistemas atualmente integrados com o ilink.  ","version":"Next","tagName":"h2"},{"title":"Enquadramento Legal‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#enquadramento-legal","content":" O diagrama abaixo descreve os prazos para implementar a Fatura√ß√£o Eletr√≥nica na Contrata√ß√£o P√∫blica em Portugal:    Ver Enquadramento Legal em detalhe.  Nota: Para enviar faturas √† FE-AP, √© necess√°rio primeiro registar o fornecedor (e ap√≥s esta valida√ß√£o fica este habilitado a enviar para todas as entidades p√∫blicas do FE-AP). Como efetuar a ades√£o?  ","version":"Next","tagName":"h2"},{"title":"Formatos e normas t√©cnicas‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#formatos-e-normas-t√©cnicas","content":" O ilink utiliza o formato UBL 2.1 na norma t√©cnica CIUS-PT, implementada pela eSPap, e adaptada da Norma Europeia EN16931 para todos os documentos de vendas (Faturas e Notas de Cr√©dito). No caso dos documentos de compra (Encomendas), utilizamos o standard internacional PEPPOLBIS3, tamb√©m baseado em UBL 2.1.  ","version":"Next","tagName":"h2"},{"title":"Tipos de Integra√ß√£o‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#tipos-de-integra√ß√£o","content":" Antes de iniciar o processo de integra√ß√£o, ser√° necess√°rio primeiro decidir o canal mais apropriado para o vosso sistema. Esta documenta√ß√£o cobre os seguintes tipos de integra√ß√µes dispon√≠veis:  ","version":"Next","tagName":"h2"},{"title":"üåê Integra√ß√£o via API REST‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#-integra√ß√£o-via-api-rest","content":" Documenta√ß√£o completa sobre como utilizar as APIs REST do ilink para integra√ß√£o com sistemas web. Inclui instru√ß√µes detalhadas sobre autentica√ß√£o, endpoints dispon√≠veis, formatos de requisi√ß√£o e resposta, exemplos de c√≥digo e boas pr√°ticas de integra√ß√£o.  Vantagens:  √â de f√°cil integra√ß√£o para aplica√ß√µes web, ou programas que permitam comunicar com webservices externosPermite enviar documentos por XML, ou alternativamente enviando o dados do documento em formato estruturado, ficando o ilink respons√°vel pela gera√ß√£o do XML final.Permite aceder a todos os documentos previamente recebidos por um clientePermite alterar o estado de um documento recebido, incluindo a sua aceita√ß√£o, rejei√ß√£o ou regulariza√ß√£oPermite consultar o hist√≥rico dos documentos  ","version":"Next","tagName":"h3"},{"title":"üì° Integra√ß√£o via AS2‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#-integra√ß√£o-via-as2","content":" Guia detalhado para a utiliza√ß√£o do protocolo preferencial de integra√ß√£o por outros brokers EDI, que funciona exclusivamente por transfer√™ncia de ficheiros XML. Obriga √† implementa√ß√£o de um cliente AS2 para a troca de documentos e mensagens de estado. Este guia cobre os procedimentos de envio e rece√ß√£o de documentos.  Vantagens  Standard universalmente aceite de transmiss√£o EDI√â de r√°pida implementa√ß√£o caso o sistema a integrar j√° possua um cliente AS2 funcionalImplementa mecanismos adicionais de seguran√ßa usando certificados embutidos no protocolo de comunica√ß√£oPermite a troca de documentos e mensagens de estado em tempo real, sem necessitar de mecanismos de consultaPermite alterar o estado de um documento (aceitar, rejeitar, regularizar, etc) e enviar esta informa√ß√£o de volta ao emissor do mesmo  Nota: Apenas recomendamos a utiliza√ß√£o deste protocolo caso o vosso sistema j√° o implemente para outros parceiros.  ","version":"Next","tagName":"h3"},{"title":"üîî Webhooks ilink‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#-webhooks-ilink","content":" Como configurar e utilizar webhooks para receber notifica√ß√µes em tempo real sobre eventos do sistema. A sec√ß√£o explica como registar endpoints, configurar tipos de eventos, autenticar chamadas e tratar as notifica√ß√µes recebidas. Inclui exemplos pr√°ticos e boas pr√°ticas para garantir fiabilidade e seguran√ßa na rece√ß√£o de informa√ß√µes em tempo real.  Vantagens  Permite implementar mecanismos de callbacks (Webhooks) em tempo real O emissor pode ser notificado quando um documento muda de estado (aceite, recusado, etc)O receptor pode ser notificado quando recebe um novo documento Mais r√°pido e eficiente que a consulta peri√≥dica de eventosComplementa a integra√ß√£o via REST  ","version":"Next","tagName":"h3"},{"title":"Guias Espec√≠ficos de Integra√ß√£o‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#guias-espec√≠ficos-de-integra√ß√£o","content":" Esta sec√ß√£o detalha como configurar a integra√ß√£o do ilink em algums sistemas em particular. Inclui instru√ß√µes passo a passo e requisitos de configura√ß√£o espec√≠ficos de cada sistema:  ","version":"Next","tagName":"h2"},{"title":"üñ•Ô∏è Integra√ß√£o Moloni‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#Ô∏è-integra√ß√£o-moloni","content":" A integra√ß√£o Moloni permite comunicar os documentos diretamente entre o software Moloni e o ilink.  ","version":"Next","tagName":"h3"},{"title":"üóÇÔ∏è Integra√ß√£o Medidata‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#Ô∏è-integra√ß√£o-medidata","content":" A integra√ß√£o Medidata permite automatizar o envio e rece√ß√£o de documentos nas aplica√ß√µes da suite Medidata via protocolos SFTP. Este guia cont√©m os pr√©-requisitos necess√°rios para permitir a integra√ß√£o com este sistema.  ","version":"Next","tagName":"h3"},{"title":"Ajuda‚Äã","type":1,"pageTitle":"ilink Knowledge Base","url":"/en/docs/#ajuda","content":" Selecione o tipo de integra√ß√£o que deseja implementar no menu lateral para aceder √† documenta√ß√£o espec√≠fica.  Para suporte t√©cnico, entre em contato com a equipa ilink em apoio@ilink.pt ou em 707 451 451. ","version":"Next","tagName":"h2"},{"title":"Lista de Integra√ß√µes","type":0,"sectionRef":"#","url":"/en/docs/guides/main","content":"","keywords":"","version":"Next"},{"title":"ERPs/Sistemas de fatura√ß√£o‚Äã","type":1,"pageTitle":"Lista de Integra√ß√µes","url":"/en/docs/guides/main#erpssistemas-de-fatura√ß√£o","content":" iGESTb-OnlineMoloniXISConnectPrimavera (requer conector ILINK)SAGE X3 F5IT PHC WinSigAnt√∫rioNovos canaisNorma6BetaSystemsPHCResolveNSOFTMicrolopesSeguinf SAP Lead4B Microsoft Dynamics NAV ArquiconsultSquadMicrosoft Business Central (cpcIT4all) WorkInNetAltmaia Fatura√ß√£oMicroDigitalSIAGFacturamaXDArtsoftKeyInvoiceTripointEdiprinterSigPorForenseSendysR2 Inform√°ticaDigiSoftProt√≥tipoQuidgestOriGestRentway ChallengeIT Prot√≥tipoAquamatrixFcore FapricelaNewHotelGRIDGolfinhosoftPlataforma WattElsifWebgescomINOVAsis  ","version":"Next","tagName":"h2"},{"title":"Gest√£o de Autarquias‚Äã","type":1,"pageTitle":"Lista de Integra√ß√µes","url":"/en/docs/guides/main#gest√£o-de-autarquias","content":" iFREG-SNC-APiTaxasMedidata Sigma-SNCairc SNC-APFresoft ERP  ","version":"Next","tagName":"h2"},{"title":"Gest√£o Documental‚Äã","type":1,"pageTitle":"Lista de Integra√ß√µes","url":"/en/docs/guides/main#gest√£o-documental","content":" iDokeDocuments - FlowinnWebdoc Ambisig  ","version":"Next","tagName":"h2"},{"title":"Contrata√ß√£o P√∫blica‚Äã","type":1,"pageTitle":"Lista de Integra√ß√µes","url":"/en/docs/guides/main#contrata√ß√£o-p√∫blica","content":" acinGov  ","version":"Next","tagName":"h2"},{"title":"Brokers EDI‚Äã","type":1,"pageTitle":"Lista de Integra√ß√µes","url":"/en/docs/guides/main#brokers-edi","content":" SaphetyCegid YetEdicomSERESGenerixIndra - MinsaitFE-APPageroeFaturaGovSeeburgerInposiaCompacerMontovabaVel - Voxel GroupAtos - Eviden  *Lista atualizada a 2025-04-24 ","version":"Next","tagName":"h2"},{"title":"Checklist pr√©-produ√ß√£o","type":0,"sectionRef":"#","url":"/en/docs/integrations/api/checklist","content":"","keywords":"","version":"Next"},{"title":"Acordo de interoperabilidade (obrigat√≥rio)‚Äã","type":1,"pageTitle":"Checklist pr√©-produ√ß√£o","url":"/en/docs/integrations/api/checklist#acordo-de-interoperabilidade-obrigat√≥rio","content":" Deve estar assinado e devolvido √† acin. Adicionalmente, recomendamos que nos envie uma breve descri√ß√£o do software a integrar e o logotipo da empresa para efeitos promocionais.  ","version":"Next","tagName":"h2"},{"title":"Envio de documentos (se aplic√°vel)‚Äã","type":1,"pageTitle":"Checklist pr√©-produ√ß√£o","url":"/en/docs/integrations/api/checklist#envio-de-documentos-se-aplic√°vel","content":" Testar a cria√ß√£o de um documento entre ambas as entidades de teste, sem erros de valida√ß√£o, contendo: PDF anexadoN√∫mero de compromissoMorada completa do fornecedor (rua, cidade, c√≥digo postal)Capital social do fornecedorN√∫mero de encomenda/requisi√ß√£oGLN do clienteGLN do local de entrega No envio para entidades n√£o p√∫blicas (ex.: envio de e-mail com PDF), confirmar se: √â enviado um e-mail com a fatura ao destinat√°rioA assinatura do XML est√° desativada (ver detalhe) caso seja usada assinatura digital qualificada no ilink No caso da consulta de estado de documentos emitidos, testar se o software recebe e interpreta corretamente o estadoSe o documento for rejeitado/regularizado, confirmar que √© poss√≠vel reenvi√°-lo com dados corrigidos  ","version":"Next","tagName":"h2"},{"title":"Rece√ß√£o de documentos (se aplic√°vel)‚Äã","type":1,"pageTitle":"Checklist pr√©-produ√ß√£o","url":"/en/docs/integrations/api/checklist#rece√ß√£o-de-documentos-se-aplic√°vel","content":" Confirmar que um documento recebido √© corretamente integrado no software, incluindo a comunica√ß√£o da importa√ß√£o e aceita√ß√£o.  ","version":"Next","tagName":"h2"},{"title":"Passagem a produ√ß√£o (obrigat√≥rio)‚Äã","type":1,"pageTitle":"Checklist pr√©-produ√ß√£o","url":"/en/docs/integrations/api/checklist#passagem-a-produ√ß√£o-obrigat√≥rio","content":" Configurar o URL de produ√ß√£o no softwareSolicitar ao ilink o token de aplica√ß√£o e chave(s) da(s) entidade(s) de produ√ß√£oGarantir que as autentica√ß√µes necess√°rias funcionam em produ√ß√£oConfirmar que o cliente tem todas as liga√ß√µes configuradas no portal do ilink e as transa√ß√µes ativas (validar com o apoio)Opcional: verificar se o cliente tem a assinatura digital configurada em produ√ß√£oOpcional: verificar se o cliente tem o template de envio de e-mail de fatura√ß√£o configurado em produ√ß√£oOpcional: informar os webhooks e chaves de autentica√ß√£o a usar em ambiente de produ√ß√£o ","version":"Next","tagName":"h2"},{"title":"Integra√ß√£o Moloni","type":0,"sectionRef":"#","url":"/en/docs/guides/moloni","content":"","keywords":"","version":"Next"},{"title":"Configura√ß√£o do Moloni‚Äã","type":1,"pageTitle":"Integra√ß√£o Moloni","url":"/en/docs/guides/moloni#configura√ß√£o-do-moloni","content":" Ap√≥s efetuar login no Moloni, devemos aceder a Configura√ß√µes &gt; Developers &gt; Config API  Aqui √© necess√°rio:  Ativar o APIIntroduzir o URL de callback de resposta (https://ilink.acin.pt)    Dever√£o tamb√©m tomar nota dos seguintes valores que s√£o gerados automaticamente:  developer IDclient secret  ","version":"Next","tagName":"h2"},{"title":"Configura√ß√£o do ilink‚Äã","type":1,"pageTitle":"Integra√ß√£o Moloni","url":"/en/docs/guides/moloni#configura√ß√£o-do-ilink","content":" Ap√≥s guardar as altera√ß√µes do lado do Moloni, entrar no ilink e ir a Integra√ß√µes &gt; Recep√ß√£o:  O developer ID adquirido no Moloni √© inserido no identificador do cliente no ilinkO client secret adquirido no Moloni √© introduzido em chave do cliente no ilinkO utilizador e palavra passe s√£o os dados de acesso da entidade Moloni.  Nota: Ambas as entidades (no Moloni e ilink) t√™m de possuir o mesmo NIF para a integra√ß√£o ser criada correctamente.  Ap√≥s ativar esta configura√ß√£o, o ilink ir√° sincronizar automaticamente todos os documentos emitidos no Moloni, e estes aparecem em Integra√ß√µes &gt; Moloni:    Devemos selecionar os documentos a importar, que ir√£o ficar em Emitidos &gt; Por enviar   ","version":"Next","tagName":"h2"},{"title":"Fluxos API","type":0,"sectionRef":"#","url":"/en/docs/integrations/api/flows","content":"Fluxos API A imagem abaixo consolida os fluxos de integra√ß√£o do API do ilink anteriormente descritos:","keywords":"","version":"Next"},{"title":"Introdu√ß√£o","type":0,"sectionRef":"#","url":"/en/docs/integrations/as2/intro","content":"","keywords":"","version":"Next"},{"title":"√Çmbito‚Äã","type":1,"pageTitle":"Introdu√ß√£o","url":"/en/docs/integrations/as2/intro#√¢mbito","content":" A comunica√ß√£o via AS2 √© destinada principalmente a brokers EDI, e facilita a comunica√ß√£o em tempo real de documentos e mensagens de estado. Para iniciar esta interliga√ß√£o, dever√° pedir as nossas credenciais AS2 √† equipa de apoio.  ","version":"Next","tagName":"h2"},{"title":"Detalhes t√©cnicos‚Äã","type":1,"pageTitle":"Introdu√ß√£o","url":"/en/docs/integrations/as2/intro#detalhes-t√©cnicos","content":" Assinatura MDN ativaAlgoritmo de encripta√ß√£o 3DESAlgoritmo de assinatura SHA1MDN as√≠ncronoFormatos suportados: CIUS-PT, CEF Telecom  ","version":"Next","tagName":"h2"},{"title":"Fase de testes‚Äã","type":1,"pageTitle":"Introdu√ß√£o","url":"/en/docs/integrations/as2/intro#fase-de-testes","content":" Ap√≥s configura√ß√£o de credenciais e certificados, normalmente √© feito um teste simples de liga√ß√£o entre os parceiros com um ficheiro de texto.  Ap√≥s essa fase, procede-se ao envio de documentos reais no ambiente de testes, passando a produ√ß√£o ap√≥s a valida√ß√£o dos documentos e mensagens de estado. Caso o broker j√° esteja integrado com diversos clientes, cada novo cliente pode passar a produ√ß√£o de imediato ap√≥s o pedido de liga√ß√£o.  ","version":"Next","tagName":"h2"},{"title":"Formatos e estados‚Äã","type":1,"pageTitle":"Introdu√ß√£o","url":"/en/docs/integrations/as2/intro#formatos-e-estados","content":" Todos os documentos recebidos pelo ilink s√£o sujeitos √† valida√ß√£o CIUS-PT. Ver validador online.  Nota: Para incluir um ficheiro PDF na fatura, este dever√° ser inserido em base64 encode dentro do elemento AdditionalDocumentReference &gt; Attachment &gt; EmbeddedDocumentBinaryObject. Ver exemplo.  Nota: Podem consultar v√°rios exemplos, bem como toda a especifica√ß√£o do CIUS-PT aqui. ","version":"Next","tagName":"h2"},{"title":"Introdu√ß√£o aos Webhooks","type":0,"sectionRef":"#","url":"/en/docs/integrations/webhooks/intro","content":"Introdu√ß√£o aos Webhooks Neste modelo de comunica√ß√£o, o ilink toma a iniciativa de comunicar ao ERP no momento que um determinado evento ocorre, dispensando de consultas frequentes ao nosso API. O ilink disponibiliza 2 webhooks: Webhook de novo documento - enviado ao receptor cada vez que um novo documento lhe √© encaminhadoWebhook de mudan√ßa de estado de documento - enviado ao emissor cada vez que um documento previamente emitido altera o seu estado Para qualquer dos webhooks acima funcionar √© necess√°rio: Implementar um endpoint Web, dispon√≠vel publicamente aos servidores do ilink, ao qual o ilink ir√° comunicar via HTTP. Os dados enviados do ilink para este URL p√∫blico est√£o de acordo com o tipo de webhook que pretendem implementar.Comunicar √† equipa do ilink que pretendem implementar o Webhook espec√≠fico para o vosso cliente, e indicar-nos uma chave de acesso e o URL p√∫blico do vosso endpoint. Este m√©todo, apesar de implementa√ß√£o mais extensa, tem a vantagem de evitar polling constante aos nossos servidores, consumir menos recursos em ambos os sistemas, e permite aceder a toda a informa√ß√£o em tempo real. S√≥ recomendamos optar pela consulta manual caso existam implica√ß√µes de seguran√ßa na abordagem dos Webhooks (ver abaixo).","keywords":"","version":"Next"},{"title":"Introdu√ß√£o ao API REST","type":0,"sectionRef":"#","url":"/en/docs/integrations/api/scope","content":"","keywords":"","version":"Next"},{"title":"√Çmbito‚Äã","type":1,"pageTitle":"Introdu√ß√£o ao API REST","url":"/en/docs/integrations/api/scope#√¢mbito","content":" O API REST do ilink permite o controlo program√°tico das principais opera√ß√µes de documentos dispon√≠veis na plataforma ilink, facilitando a integra√ß√£o com sistemas externos.  O ilink suporta 2 fluxos principais de integra√ß√£o: rece√ß√£o e emiss√£o de documentos, com respetivo reporte de estados. Pode implementar ambos os fluxos ou apenas um, consoante as necessidades do seu software.  ","version":"Next","tagName":"h2"},{"title":"Pr√©-requisitos‚Äã","type":1,"pageTitle":"Introdu√ß√£o ao API REST","url":"/en/docs/integrations/api/scope#pr√©-requisitos","content":" Para integrar atrav√©s do API, √© necess√°rio contactar primeiro a nossa equipa (apoio@ilink.pt) para solicitar acessos ao ambiente de testes/qualidade.  Os acessos disponibilizados incluem:  Um token de plataforma, que identifica o sistema/plataforma que acede ao webserviceUma chave p√∫blica, que identifica o cliente/NIF que pretende aceder ao webservice  Isto significa que cada cliente que pretende emitir ou receber documentos necessita de um pr√©-registo junto da nossa equipa, para que seja gerada a sua chave p√∫blica. O token de plataforma √© √∫nico para o sistema a integrar (comum a todos os clientes que utilizam o seu sistema) e deve ser usado em todas as chamadas ao API.  Nos acessos de teste, s√£o tamb√©m disponibilizados 2 clientes/NIFs, juntamente com as respetivas credenciais de acesso ao portal do ilink. Deve usar estas entidades para efetuar transa√ß√µes de documentos entre si e, opcionalmente, aceder ao portal para consulta dos mesmos. Os NIFs atribu√≠dos podem ser alterados se necess√°rio.  Nota: Ser√£o fornecidos novos acessos (token de plataforma e chave p√∫blica por NIF) aquando da entrada em produ√ß√£o.  ","version":"Next","tagName":"h2"},{"title":"Notas t√©cnicas‚Äã","type":1,"pageTitle":"Introdu√ß√£o ao API REST","url":"/en/docs/integrations/api/scope#notas-t√©cnicas","content":" O webservice segue a arquitetura RESTOs c√≥digos de estado HTTP devolvidos respeitam o RFC 7231Todos os dados enviados (incluindo anexos XML) devem ser codificados em UTF-8. Formatos como ANSI, UTF-8 BOM e ISO 8859-1 devem ser evitados para garantir compatibilidade com todos os sistemas recetoresAs respostas (payloads) s√£o devolvidas em formato JSONOs servidores do ilink funcionam exclusivamente atrav√©s de HTTPS, com vers√£o TLS 1.2 (em caso de problemas de comunica√ß√£o, consulte poss√≠veis solu√ß√µes para Java e C#)A especifica√ß√£o e cliente de demonstra√ß√£o swagger est√° dispon√≠vel aquiExistem 2 ambientes distintos, com URLs base diferentes: Testes/pr√©-produ√ß√£o: https://ilink.acin.pt/ilinktests-api/api/v1/ptProdu√ß√£o: https://ilink.pt/ilink-api/api/v1/pt  Nota: Os documentos emitidos e recebidos atrav√©s do API podem ser consultados no portal de testes do ilink usando as credenciais que lhe foram fornecidas. ","version":"Next","tagName":"h2"},{"title":"Considera√ß√µes de seguran√ßa","type":0,"sectionRef":"#","url":"/en/docs/integrations/webhooks/security","content":"Considera√ß√µes de seguran√ßa O uso de webhooks assume que o URL/porta em quest√£o est√° dispon√≠vel publicamente, ou pelo menos acess√≠vel aos nossos ambientes de testes e produ√ß√£o! Para tal, poder√° ser necess√°rio abrir portas ou criar as seguintes excep√ß√µes no firewall da m√°quina que executa o servi√ßo web: https://ilink.acin.pt (62.28.56.162:443) - testeshttps://ilink.pt (194.38.136.153:443 193.43.40.153:443) - produ√ß√£o Caso falhe o processo de comunica√ß√£o de um documento, o ilink ir√° tentar comunicar novamente at√© 10 vezes nos pr√≥ximos 7 dias, com intervalos incrementalmente maiores por cada tentativa. Ap√≥s 10 tentativas falhadas de comunica√ß√£o, o ilink ir√° deixar de tentar comunicar esse documento ao ERP. Um documento √© considerado entregue com sucesso ao ERP quando a reposta do webhook retorna um HTTP status code 200 (independentemente do conte√∫do da resposta). Recomendamos evitar processamentos longos no endpoint de resposta. Importante: Na implementa√ß√£o deste endpoint, o ERP tem a responsabilidade de validar a chave de acesso e posteriormente registar a informa√ß√£o recebida no seu sistema. Recomendamos vivamente ao vosso sistema validar a chave de acesso enviada nos headers da nossa resposta, caso contr√°rio est√£o a aceitar dados provenientes de origem desconhecida. O ilink envia a vossa chave no header Authorization: Bearer {CHAVE_INTEGRACAO}. Se n√£o for definida nenhuma chave para o webhook, ser√° usado o token da aplica√ß√£o integradora.","keywords":"","version":"Next"},{"title":"Tipos de Webhooks","type":0,"sectionRef":"#","url":"/en/docs/integrations/webhooks/types","content":"","keywords":"","version":"Next"},{"title":"Webhook de novo documento‚Äã","type":1,"pageTitle":"Tipos de Webhooks","url":"/en/docs/integrations/webhooks/types#webhook-de-novo-documento","content":" O webhook de novo documento √© uma alternativa √† consulta frequente de documentos por parte da entidade receptora. Cada vez que √© enviado um novo documento a esta entidade, o seu callback de novo documento ser√° invocado.  O endpoint implementado dever√° esperar os seguintes dados desta especifica√ß√£o.  ","version":"Next","tagName":"h2"},{"title":"Webhook de mudan√ßa de estado de documento‚Äã","type":1,"pageTitle":"Tipos de Webhooks","url":"/en/docs/integrations/webhooks/types#webhook-de-mudan√ßa-de-estado-de-documento","content":" O webhook de mudan√ßa de estado de documento √© uma alternativa √† consulta frequente dos estados de cada documento emitido por parte da entidade emissora. Cada vez que o receptor do um documento emitido aceitar, recusar ou receber um documento, este callback ser√° invocado √† entidade emissora com os dados atuais.  O endpoint implementado dever√° esperar os seguintes dados desta especifica√ß√£o. ","version":"Next","tagName":"h2"},{"title":"Integra√ß√£o Medidata","type":0,"sectionRef":"#","url":"/en/docs/guides/medidata","content":"","keywords":"","version":"Next"},{"title":"Funcionamento‚Äã","type":1,"pageTitle":"Integra√ß√£o Medidata","url":"/en/docs/guides/medidata#funcionamento","content":" O ilink tem a capacidade de integrar faturas com os programas da suite Medidata, tanto no inbound (rece√ß√£o de documentos na aplica√ß√£o Sigma) como no outbound (envio de documentos da aplica√ß√£o das √°guas).  Para tal processo funcionar, √© necess√°rio assegurar os seguintes requisitos do lado do cliente:  ","version":"Next","tagName":"h2"},{"title":"Inbound (envio de documentos do ilink para o software Medidata)‚Äã","type":1,"pageTitle":"Integra√ß√£o Medidata","url":"/en/docs/guides/medidata#inbound-envio-de-documentos-do-ilink-para-o-software-medidata","content":" √â necess√°rio que o cliente disponibilize um servidor SFTP, com permiss√µes de escrita, e acess√≠vel publicamente ou aos IPs do ilink com regras NAT:  62.28.56.161, 62.28.56.162 (ilink testes)193.43.40.153 (ilink produ√ß√£o)Opcionalmente, podem ser autorizadas as gamas de IP anteriores.  Nota: Apenas √© suportado o protocolo SFTP. Liga√ß√µes FTP, mesmo com encripta√ß√£o TLS/SSL, n√£o s√£o aceites.  Este servidor dever√° ser tamb√©m acess√≠vel ao software Medidata (normalmente atrav√©s do mapeamento de uma pasta de rede). O objetivo √© que seja poss√≠vel ao ilink criar ficheiros neste servidor e que os mesmos consigam ser lidos pelo software Medidata atrav√©s da pasta INBOUND.  Ap√≥s a cria√ß√£o do mesmo, devem-nos enviar os seguintes dados para serem configurados no ilink:  endere√ßo/IP do servidorportautilizadorpalavra-passe  ","version":"Next","tagName":"h2"},{"title":"Outbound (envio de documentos do software Medidata para o ilink)‚Äã","type":1,"pageTitle":"Integra√ß√£o Medidata","url":"/en/docs/guides/medidata#outbound-envio-de-documentos-do-software-medidata-para-o-ilink","content":" √â necess√°rio configurar o m√≥dulo da aplica√ß√£o das √°guas para gerar os ficheiros XML num servidor SFTP, que dever√£o enviar os acessos ao ilink. Este servidor SFTP pode igualmente ser configurado como uma pasta de rede, de modo a que a aplica√ß√£o das √°guas guarde os ficheiros XML nessa pasta, e estes fiquem imediatamente dispon√≠veis no servidor SFTP. N√£o √© necess√°rio disponibilizar os ficheiros PDF na pasta de outbound.  Necessita igualmente de permiss√µes de leitura e escrita p√∫blicas ou para os nossos IPs com regras NAT:  62.28.56.161 (ilink testes)193.43.40.153 (ilink produ√ß√£o)Opcionalmente, podem ser autorizadas as gamas de IP anteriores.  Nota: Apenas √© suportado o protocolo SFTP. Liga√ß√µes FTP, mesmo com encripta√ß√£o TLS/SSL, n√£o s√£o aceites.  Ap√≥s a cria√ß√£o do mesmo, devem-nos enviar os seguintes dados para serem configurados no ilink:  endere√ßo/IP do servidorportautilizadorpalavra-passe  ","version":"Next","tagName":"h2"},{"title":"Estrutura de pastas Medidata‚Äã","type":1,"pageTitle":"Integra√ß√£o Medidata","url":"/en/docs/guides/medidata#estrutura-de-pastas-medidata","content":" Por norma, os servidores Medidata devem ter a seguinte estrutura de pastas preparadas para a emiss√£o e rece√ß√£o de documentos:  / ‚îú‚îÄ‚îÄ IN # O ilink coloca aqui as faturas a receber pelo Medidata ‚îú‚îÄ‚îÄ OUT # Medidata coloca os estados dos documentos recebidos e processados aqui ‚îú‚îÄ‚îÄ OUTBOUND ‚îÇ ‚îú‚îÄ‚îÄ ADERENTES ‚îÇ ‚îú‚îÄ‚îÄ COPIAS ‚îÇ ‚îú‚îÄ‚îÄ DOCUMENTOS # Medidata coloca aqui os ficheiros a enviar para o ilink | | | (IMPORTANTE: N√ÉO separar em subpastas por NIF) ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ERRORS # O ilink coloca os ficheiros com erro aqui: consultar registo de integra√ß√£o ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ FAILED # O ilink coloca aqui os ficheiros que n√£o conseguiu processar ‚îÇ ‚îî‚îÄ‚îÄ RESPOSTAS ‚îÇ ‚îî‚îÄ‚îÄ DOCUMENTOS ‚îÇ ‚îî‚îÄ‚îÄ FicheiroEstados.txt # O ilink comunica aqui as refer√™ncias das faturas criadas e enviadas ‚îú‚îÄ‚îÄ READED ‚îî‚îÄ‚îÄ RESPOSTAS   ","version":"Next","tagName":"h2"},{"title":"Consulta de documentos e registos de integra√ß√£o‚Äã","type":1,"pageTitle":"Integra√ß√£o Medidata","url":"/en/docs/guides/medidata#consulta-de-documentos-e-registos-de-integra√ß√£o","content":" √â poss√≠vel consultar os documentos emitidos e recebidos no ilink acedendo ao portal, nas √°reas deDocumentos Emitidos e Documentos Recebidos.  Para consulta dos documentos comunicados via integra√ß√£o com o Medidata (an√°lise de erros, confirma√ß√£o de rece√ß√£o, etc), √© poss√≠vel aceder √† √°rea Integra√ß√µes &gt; Registos de Integra√ß√£o, e verificar quaisquer erros que ocorreram na comunica√ß√£o de documentos.  Nota: √â poss√≠vel configurar o envio de um relat√≥rio via email ap√≥s o envio de documentos emitidos pelo Medidata. Deste modo, √© poss√≠vel confirmar que documentos foram enviados com sucesso, bem como poss√≠veis erros de integra√ß√£o e envio. ","version":"Next","tagName":"h2"},{"title":"Outros aspetos","type":0,"sectionRef":"#","url":"/en/docs/integrations/as2/others","content":"","keywords":"","version":"Next"},{"title":"Assinatura digital‚Äã","type":1,"pageTitle":"Outros aspetos","url":"/en/docs/integrations/as2/others#assinatura-digital","content":" O protocolo AS2 exige o uso de uma assinatura aplicada ao n√≠vel do transporte, atrav√©s de S/MIME e certificados X.509. A autentica√ß√£o resulta da compara√ß√£o entre as chaves p√∫blicas e privadas do emissor e do recetor.  A assinatura ao n√≠vel do documento √© obrigat√≥ria em comunica√ß√µes via web services, mas √© opcional em comunica√ß√µes via AS2, dado que neste canal j√° existe assinatura ao n√≠vel do S/MIME. Fonte: Guia de Transmiss√£o de documentos eletr√≥nicos FE-AP, ESPAP-IP  O ilink valida sempre a assinatura de todos os documentos recebidos. Pode ser usado este validador para verificar a assinatura. S√£o aceites os seguintes formatos: PADES (PDF), XMLDSig e XADES-BES enveloped (XML). O ilink espera que a chave p√∫blica usada na assinatura esteja inclu√≠da no XMLDSig, n√£o sendo necess√°rio configurar chaves previamente.  ","version":"Next","tagName":"h2"},{"title":"Pedidos de liga√ß√£o‚Äã","type":1,"pageTitle":"Outros aspetos","url":"/en/docs/integrations/as2/others#pedidos-de-liga√ß√£o","content":" O pedido de liga√ß√£o deve ser enviado √† equipa do ilink atrav√©s do portal de liga√ß√µes sempre que um cliente de um broker externo pretende ligar-se a um cliente do ilink (e vice-versa). Este processo √© feito por cada par de clientes.  Quando a equipa do ilink recebe um pedido de liga√ß√£o de outro broker, a resposta incluir√° as valida√ß√µes adicionais exigidas pelo cliente nos ficheiros recebidos (ex.: PDF anexado, n√∫mero de compromisso, etc.), caso existam.  ","version":"Next","tagName":"h2"},{"title":"Altera√ß√µes de certificados‚Äã","type":1,"pageTitle":"Outros aspetos","url":"/en/docs/integrations/as2/others#altera√ß√µes-de-certificados","content":" Os certificados usados pelo ilink em comunica√ß√µes AS2 t√™m, por norma, validade de 3 anos. Altera√ß√µes de certificados s√£o comunicadas aos parceiros com 1 m√™s de anteced√™ncia. ","version":"Next","tagName":"h2"},{"title":"Especifica√ß√£o t√©cnica","type":0,"sectionRef":"#","url":"/en/docs/integrations/api/specification","content":"","keywords":"","version":"Next"},{"title":"Documenta√ß√£o Swagger‚Äã","type":1,"pageTitle":"Especifica√ß√£o t√©cnica","url":"/en/docs/integrations/api/specification#documenta√ß√£o-swagger","content":" O ilink utiliza uma especifica√ß√£o OpenAPI 3 num cliente Swagger, dispon√≠vel aqui. Neste cliente web, pode efetuar chamadas de teste ao nosso API, analisar as respostas obtidas e verificar os dados a enviar para cada endpoint/m√©todo.  O cliente swagger disponibilizado acima deve acompanhar o seu processo de desenvolvimento. √â tamb√©m poss√≠vel verificar como as chamadas ao API s√£o constru√≠das atrav√©s do cURL (consulte o exemplo abaixo):    Nota: S√£o tamb√©m disponibilizados v√°rios clientes HTTP, em mais de 50 linguagens e frameworks, gerados automaticamente a partir da nossa especifica√ß√£o, que podem servir de suporte inicial ao processo de integra√ß√£o.  ","version":"Next","tagName":"h2"},{"title":"Autoriza√ß√£o‚Äã","type":1,"pageTitle":"Especifica√ß√£o t√©cnica","url":"/en/docs/integrations/api/specification#autoriza√ß√£o","content":" Todos os pedidos efetuados ao API devem conter obrigatoriamente o header de autoriza√ß√£o abaixo:  Authorization: Bearer {TOKEN_PLATAFORMA}  No cliente Swagger, o processo de autoriza√ß√£o √© efetuado inserindo o token de plataforma ap√≥s clicar no bot√£o Authorize.    Ap√≥s esta opera√ß√£o, deve notar que todos os pedidos subsequentes ao API incluem o header Authorization:    ","version":"Next","tagName":"h2"},{"title":"Autentica√ß√£o‚Äã","type":1,"pageTitle":"Especifica√ß√£o t√©cnica","url":"/en/docs/integrations/api/specification#autentica√ß√£o","content":" Antes de efetuar a primeira consulta ao API do ilink, √© obrigat√≥rio efetuar uma autentica√ß√£o por cliente/NIF. Esta autentica√ß√£o serve de handshake inicial entre o cliente e o ilink e √© efetuada atrav√©s do endpoint POST /apps/authentications:    Uma autentica√ß√£o v√°lida deve retornar esta resposta:  HTTP status: 200 OK { &quot;success&quot;: true, &quot;message&quot;: { &quot;code&quot;:&quot;e123&quot;, &quot;msg&quot;:&quot;Integra√ß√£o realizada com sucesso.&quot; } }   A autentica√ß√£o tem dura√ß√£o ilimitada (s√≥ precisa de ser invocada 1 vez por cliente/NIF que acede ao API). Pode tamb√©m ser revogada atrav√©s do m√©todo DELETE /apps/authentications:    Se o processo de autentica√ß√£o n√£o for conclu√≠do, ou o header Authorization n√£o for enviado nos pedidos ao API, todas as chamadas ser√£o recusadas para esse NIF com o seguinte erro:  HTTP status: 401 Unauthorized { &quot;success&quot;: false, &quot;errors&quot;: [ { &quot;code&quot;: &quot;e069&quot;, &quot;msg&quot;: &quot;Autentica√ß√£o inv√°lida&quot; } ] }   Nota: Em ambiente de produ√ß√£o √© necess√°rio autenticar novamente cada cliente/NIF. ","version":"Next","tagName":"h2"},{"title":"Rece√ß√£o de documentos","type":0,"sectionRef":"#","url":"/en/docs/integrations/api/received","content":"","keywords":"","version":"Next"},{"title":"√Çmbito‚Äã","type":1,"pageTitle":"Rece√ß√£o de documentos","url":"/en/docs/integrations/api/received#√¢mbito","content":" Esta funcionalidade permite a entrada autom√°tica de documentos de fatura√ß√£o no ERP do recetor, simplificando a integra√ß√£o nos sistemas contabil√≠sticos. Tamb√©m possibilita comunicar ao emissor os estados de aceita√ß√£o e integra√ß√£o do documento (pago, aceite, recusado, etc.).  Neste fluxo de integra√ß√£o, devem ser implementados os seguintes pontos:  Leitura e processamento de dados: Extrair a informa√ß√£o do XML ou de outros dados estruturados do documento para registar corretamente no ERPComunica√ß√£o do estado de integra√ß√£o: Informar o ilink sobre o resultado do processo de integra√ß√£o do documentoGest√£o do estado de aceita√ß√£o: Comunicar o estado de aceita√ß√£o do documento, incluindo mensagens detalhadas em caso de erro ou rejei√ß√£o  ","version":"Next","tagName":"h2"},{"title":"M√©todos de rece√ß√£o‚Äã","type":1,"pageTitle":"Rece√ß√£o de documentos","url":"/en/docs/integrations/api/received#m√©todos-de-rece√ß√£o","content":" Permite consultar e integrar documentos no sistema. A rece√ß√£o pode ser feita de duas formas: Consulta manual de documentos ou Webhook de rece√ß√£o.  ","version":"Next","tagName":"h2"},{"title":"Consulta manual de documentos‚Äã","type":1,"pageTitle":"Rece√ß√£o de documentos","url":"/en/docs/integrations/api/received#consulta-manual-de-documentos","content":" Neste modo, √© necess√°rio aceder ao endpoint GET /apps/documents. √â poss√≠vel indicar par√¢metros de pesquisa para filtrar os resultados. A resposta inclui os dados principais dos documentos e informa√ß√£o de pagina√ß√£o atrav√©s das propriedades rows (n√∫mero de elementos por p√°gina) e page (n√∫mero da p√°gina).  Para consultar os detalhes de um documento e aceder aos ficheiros XML e PDF, deve ser usado o m√©todo GET /apps/documents/{id}, recorrendo a um dos ids obtidos na listagem anterior.  O endpoint pode ser chamado periodicamente (processo em segundo plano) ou por a√ß√£o de um utilizador no sistema (em tempo real).  Nota: A chave p√∫blica aqui usada corresponde √† entidade recetora dos documentos. Deve ser utilizada a chave que identifica quem acede aos documentos recebidos.  Importante: O uso excessivo deste endpoint deve ser evitado. Chamadas em demasia podem originar timeouts ou restri√ß√µes de acesso, de acordo com o acordo de interoperabilidade.  ","version":"Next","tagName":"h3"},{"title":"Webhook de rece√ß√£o (recomendado)‚Äã","type":1,"pageTitle":"Rece√ß√£o de documentos","url":"/en/docs/integrations/api/received#webhook-de-rece√ß√£o-recomendado","content":" Neste modo, o ilink notifica o ERP sempre que chega um novo documento, dispensando consultas frequentes ao endpoint GET /apps/documents. Para mais informa√ß√£o, ver a sec√ß√£o Webhooks.  Nota: S√£o enviados os dados dos documentos num formato estruturado, incluindo URLs p√∫blicos para acesso aos ficheiros XML e PDF.  ","version":"Next","tagName":"h3"},{"title":"Importa√ß√£o e aceita√ß√£o‚Äã","type":1,"pageTitle":"Rece√ß√£o de documentos","url":"/en/docs/integrations/api/received#importa√ß√£o-e-aceita√ß√£o","content":" Ap√≥s consultar o documento, o ERP deve comunicar ao ilink o estado de processamento, ou seja, se foi integrado com sucesso ou se necessita de corre√ß√µes. S√£o necess√°rios 2 passos:  1. Comunicar o estado do documento Feito com POST /apps/documents/{id}/accepted, indicando se o documento foi aceite ou n√£o e, em caso de rejei√ß√£o, o motivo√â obrigat√≥rio indicar o motivo de rejei√ß√£o se o documento n√£o for aceiteUm documento rejeitado pode ser reenviado pelo emissor com os dados corrigidos 2. Comunicar a importa√ß√£o do documento (apenas se aceite) Se o passo anterior indicar aceita√ß√£o, deve ser chamado o m√©todo POST /apps/documents/{id}  Nota: Documentos rejeitados n√£o devem ser importados.  A comunica√ß√£o correta de documentos aceites/importados garante hist√≥rico de auditoria e facilita o consumo da API. Se estiver a ser usada a consulta manual, documentos j√° rejeitados ou importados n√£o voltam a ser devolvidos em chamadas futuras. Ou seja, o endpoint GET /apps/documents n√£o devolve documentos previamente rejeitados ou importados.  A imagem abaixo mostra como as opera√ß√µes feitas pelo ERP ficam registadas no portal do ilink:    O uso correto da importa√ß√£o de documentos gera tamb√©m uma informa√ß√£o consult√°vel para o fornecedor do documento, ficando confirmada a sua integra√ß√£o com o sistema do recetor.  ","version":"Next","tagName":"h2"},{"title":"Estados de Processo (opcional)‚Äã","type":1,"pageTitle":"Rece√ß√£o de documentos","url":"/en/docs/integrations/api/received#estados-de-processo-opcional","content":" Nota: Funcionalidade opcional e apenas informativa. N√£o interfere com a rece√ß√£o de documentos.  O ilink permite criar estados de documento personalizados. Quando ativa, √© poss√≠vel consultar e modificar o estado de um documento via API. Esta capacidade permite que sistemas externos (ex.: gest√£o documental) alterem o estado processual de forma integrada, e √© √∫til para sincronizar processos internos da organiza√ß√£o entre sistemas. Todas as altera√ß√µes de estado de processo ficam registadas no hist√≥rico do documento.  Importante: O estado de processo √© independente do estado base (recebido, aceite, etc.). Serve apenas para organiza√ß√£o interna e registo de opera√ß√µes.  Para consultar os estados dispon√≠veis, use GET /apps/processstates, que devolve a lista completa com respetivo identification_code. Para alterar o estado de um documento, use PUT /apps/documents/{id}/processstates, indicando o novo identification_code.  A configura√ß√£o dos estados de processo a usar √© feita pela equipa de apoio do ilink. ","version":"Next","tagName":"h2"},{"title":"Onboarding FEAP","type":0,"sectionRef":"#","url":"/en/docs/onboarding-feap","content":"","keywords":"","version":"Next"},{"title":"Quais os organismos da Administra√ß√£o P√∫blica (AP) obrigados a utilizar a solu√ß√£o FE-AP?‚Äã","type":1,"pageTitle":"Onboarding FEAP","url":"/en/docs/onboarding-feap#quais-os-organismos-da-administra√ß√£o-p√∫blica-ap-obrigados-a-utilizar-a-solu√ß√£o-fe-ap","content":" ‚ÄãOs contraentes p√∫blicos vinculados √† utiliza√ß√£o da solu√ß√£o FE-AP fornecida pela eSPap s√£o:  os organismos da Administra√ß√£o direta do Estado, ou seja, todos os √≥rg√£os, servi√ßos e agentes integrados na pessoa coletiva Estado, por exemplo, Dire√ß√µes-Gerais, Dire√ß√µes Regionais, Secretarias Gerais, DGEstE, ASAE, AT, IGF, entre outras;os institutos p√∫blicos, por exemplo, o IAPMEI, o INEM, o IPDJ, o ISS, a pr√≥pria eSPap, entre outros.  Consulte a lista de TODAS as entidades p√∫blicas atualmente a usar o FE-AP.  ","version":"Next","tagName":"h2"},{"title":"Como podem os fornecedores da AP aderir √† solu√ß√£o FE-AP?‚Äã","type":1,"pageTitle":"Onboarding FEAP","url":"/en/docs/onboarding-feap#como-podem-os-fornecedores-da-ap-aderir-√†-solu√ß√£o-fe-ap","content":" Os utilizadores do ilink podem efetuar o envio autom√°tico de fatura√ß√£o eletr√≥nica directamente para o FE-AP ap√≥s a conclus√£o do processo de ades√£o e onboarding da eSPap.  Em suma, existem 3 passos:  ","version":"Next","tagName":"h2"},{"title":"1. Formul√°rio de ades√£o‚Äã","type":1,"pageTitle":"Onboarding FEAP","url":"/en/docs/onboarding-feap#1-formul√°rio-de-ades√£o","content":" Preenchimento do formul√°rio de ades√£o de fornecedores.  P√°gina inicial. Premir Pedido de Ades√£o Preencher os dados da vossa empresa (todos os campos assinalados s√£o obrigat√≥rios)  Nota: No caso de representar mais do que uma entidade fiscal, devem descarregar o template e preencher o mesmo no passo 1.2:  Preencher com os dados da vossa empresa (respons√°vel que ir√° dar seguimento √† fatura√ß√£o eletr√≥nica) Responder que v√£o utilizar um broker Identificar o broker ACIN, bem como o respons√°vel do projeto no passo seguinte e marcar a autoriza√ß√£o Inserir um email para receber as notifica√ß√µes de entrega dos documentos e carregar um exemplo de uma fatura e uma nota de cr√©dito reais Passo final: consentir e enviar Receber o email de confirma√ß√£o e ID de projeto, que ser√° solicitado na fase final do projeto.  ","version":"Next","tagName":"h3"},{"title":"2. Testes‚Äã","type":1,"pageTitle":"Onboarding FEAP","url":"/en/docs/onboarding-feap#2-testes","content":" Ap√≥s a valida√ß√£o pela equipa da eSPap, o fornecedor √© contactado pela eSPap com email que informa o seu ID de projeto e a data de in√≠cio dos testes:  O fornecedor dever√° solicitar acessos no ambiente de qualidade (testes) do ilink e emitir diversos documentos para estas entidades de teste. Estes documentos poder√£o ser criados manualmente no ilink mas idealmente recomendamos que sejam integrados directamente a partir do seu software EDI/ERP. Nota: devem enviar sempre o PDF da fatura anexado durante a fase de testes.Ap√≥s o envio destes documentos para as entidades de teste, o fornecedor dever√° informar a equipa do iLink para verificar se os ficheiros foram comunicados com sucesso √† eSPap, e caso contr√°rio, como dever√£o corrigir os documentos.√Ä medida que os documentos s√£o integrados correctamente no ambiente de qualidade da eSPap, o fornecedor ir√° receber e-mails de confirma√ß√£o como este. Nota: dever√£o guardar os IDs obtidos, bem como os documentos que enviaram para testes, pois s√£o necess√°rios para a fase final!  2.1 Preenchimento de campos das faturas nos testes‚Äã  Caso n√£o pretenda criar os documentos manualmente no ilink, pode saltar este passo.  √â altamente recomendado preencher os campos abaixo durante a fase de testes:  N√∫mero de encomenda (deve usar o valor TESTENOTAENCOM1234): Morada de entrega (deve usar a morada presente na fatura) Termos de pagamento (deve usar os termos de pagamento presentes na fatura) Meios de pagamento (deve usar os meios de pagamento presentes na fatura) N√∫mero de compromisso (deve usar o valor TESTECOMPROMISSO1234) PDF do documento (obrigat√≥rio)  ","version":"Next","tagName":"h3"},{"title":"3. Passagem a produ√ß√£o‚Äã","type":1,"pageTitle":"Onboarding FEAP","url":"/en/docs/onboarding-feap#3-passagem-a-produ√ß√£o","content":" Ap√≥s o envio de faturas e notas de cr√©dito v√°lidas e a sua confirma√ß√£o pela equipa do iLink, o fornecedor dever√° preencher o formul√°rio de passagem a produ√ß√£o.  Neste formul√°rio, ter√° de preencher uma lista de documentos que foram usados para os testes: No primeiro passo dever√° identificar o ID do projecto (indicado por email pela ESPAP) bem como o NIF associado ao projeto). Devem depois anexar imagens dos e-mails recebidos onde solicitado no formul√°rio acima (apenas a fatura e a nota de cr√©dito s√£o obrigat√≥rios) No final, devem consentir e submeter o formul√°rio:  Ser√° depois enviado um email de confirma√ß√£o:  ","version":"Next","tagName":"h3"},{"title":"4. Formaliza√ß√£o da ades√£o‚Äã","type":1,"pageTitle":"Onboarding FEAP","url":"/en/docs/onboarding-feap#4-formaliza√ß√£o-da-ades√£o","content":" Ap√≥s confirma√ß√£o da passagem a produ√ß√£o, √© recebido um e-mail da eSPap a pedir para finalizar o processo atrav√©s do seguinte link, onde devem preencher os dados necess√°rios e anexar a documenta√ß√£o requisitada pelo representante legal da empresa:  https://www.feap.gov.pt/Paginas/PedidoAdesao.aspx  Isto conclui a passagem a produ√ß√£o no FE-AP. Ap√≥s valida√ß√£o da eSPap, o processo fica conclu√≠do e entrar√° em produ√ß√£o na data indicada do email. Caso sejam detectadas falhas, a equipa do ilink ir√° entrar em contacto.  ","version":"Next","tagName":"h3"},{"title":"Mais informa√ß√£o‚Äã","type":1,"pageTitle":"Onboarding FEAP","url":"/en/docs/onboarding-feap#mais-informa√ß√£o","content":" Perguntas Frequentes da eSPap  Lista de todos os fornecedores atualmente inscritos no FE-AP ","version":"Next","tagName":"h2"},{"title":"Mensagens de Estado","type":0,"sectionRef":"#","url":"/en/docs/integrations/as2/status-messages","content":"","keywords":"","version":"Next"},{"title":"Lista de estados‚Äã","type":1,"pageTitle":"Mensagens de Estado","url":"/en/docs/integrations/as2/status-messages#lista-de-estados","content":" Os MessageStatus do ilink incluem os estados EDI definidos pela eSPap no elemento DocumentResponse&gt;Response&gt;ResponseCode:  ACCEPTED ‚Äì documento passou pela valida√ß√£o de XML e regras de qualidade, foi integrado no sistema e enviado ao recetorERROR ‚Äì documento n√£o passou pela valida√ß√£o inicial de qualidade (XML inv√°lido, campos obrigat√≥rios em falta, regras do recetor n√£o cumpridas, etc.)14 ‚Äì documento recusado pelo recetor e a aguardar regulariza√ß√£o (deve ser retificado e reenviado, ou substitu√≠do por nota de cr√©dito/d√©bito)22 ‚Äì documento devolvido pelo recetor e dever√° ser anulado; deve ser emitido novo documento33 ‚Äì documento em pagamento29 ‚Äì documento pago11 ‚Äì documento processado pelo recetor (aceite)30 ‚Äì nota de cr√©dito aceite pelo recetor  Nota: Os estados ERROR, 14 e 22 incluem a descri√ß√£o do erro em DocumentResponse&gt;Response&gt;Description. Embora os estados 33 e 29 n√£o sejam enviados pelo ilink, estes s√£o recebidos e interpretados corretamente pelo sistema.  ","version":"Next","tagName":"h2"},{"title":"Fluxo de estados EDI‚Äã","type":1,"pageTitle":"Mensagens de Estado","url":"/en/docs/integrations/as2/status-messages#fluxo-de-estados-edi","content":" Poss√≠veis fluxos que um documento pode seguir:  Descri√ß√£o\tProcessoDocumento chegou ao ilink e n√£o passou a valida√ß√£o das regras sem√¢nticas do XML ou controlo de qualidade (erro CIUS-PT, campos obrigat√≥rios em falta, liga√ß√£o inexistente).\tERROR Documento chegou ao ilink e passou na valida√ß√£o XML, sendo enviado ao recetor.\tACCEPTED Documento chegou ao ilink, validou corretamente e chegou ao destinat√°rio, mas o recetor n√£o integrou no sistema e pediu regulariza√ß√£o (emiss√£o de nota de cr√©dito ou reenvio retificado).\tACCEPTED &gt; 14 Documento chegou ao ilink, validou corretamente e chegou ao destinat√°rio, mas foi devolvido, obrigando √† emiss√£o de novo documento.\tACCEPTED &gt; 22 Documento chegou ao ilink, validou corretamente e foi integrado no sistema contabil√≠stico do recetor.\tACCEPTED &gt; 11 Nota de cr√©dito chegou ao ilink, validou corretamente e foi integrada no sistema do recetor para ajuste de caixa.\tACCEPTED &gt; 30  ","version":"Next","tagName":"h2"},{"title":"Reenvio de documentos‚Äã","type":1,"pageTitle":"Mensagens de Estado","url":"/en/docs/integrations/as2/status-messages#reenvio-de-documentos","content":" Um documento s√≥ pode ser reenviado ap√≥s retifica√ß√£o se o √∫ltimo estado for:  ERROR (erro de valida√ß√£o ou liga√ß√£o)14 (regulariza√ß√£o pedida pelo cliente)  Para os restantes estados, o reenvio n√£o √© permitido e o documento ser√° rejeitado pelo sistema. ","version":"Next","tagName":"h2"},{"title":"Emiss√£o de documentos","type":0,"sectionRef":"#","url":"/en/docs/integrations/api/issued","content":"","keywords":"","version":"Next"},{"title":"√Çmbito‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#√¢mbito","content":" A plataforma ilink permite aos sistemas integradores emitir documentos que s√£o automaticamente enviados aos respetivos destinat√°rios. O ilink gere todo o processo de envio para os ERPs e EDIs configurados para cada cliente, tornando este processo transparente para o API. Estas configura√ß√µes s√£o realizadas pela equipa de apoio do ilink antes da entrada em produ√ß√£o.  A plataforma ilink suporta o envio de faturas eletr√≥nicas em 2 cen√°rios distintos:  Envio de PDF assinado via e-mail para consumidores finais ou empresas privadas Neste cen√°rio, n√£o √© necess√°rio criar liga√ß√µes com outros EDIs. Basta indicar no endpoint de cria√ß√£o de documento o(s) endere√ßo(s) de e-mail de destino. Para mais informa√ß√µes, consulte a sec√ß√£o M√©todos de envio. Envio de XML CIUS-PT para entidades p√∫blicas (obrigat√≥rio nos contratos p√∫blicos) Neste cen√°rio, √© necess√°rio configurar previamente as liga√ß√µes entre NIFs e, possivelmente, entre outros brokers EDI externos.  Como s√£o enviados os documentos para outros brokers EDI?Durante a fase de passagem a produ√ß√£o, deve ser feito um levantamento de todas as entidades que ir√£o receber documentos via EDI, bem como os respetivos brokers EDI. Posteriormente, a equipa de apoio (apoio@ilink.pt) configurar√° as liga√ß√µes necess√°rias para que os documentos sejam automaticamente integrados no sistema de cada recetor. Antes de enviar documentos para a solu√ß√£o FE-AP da eSPap, √© tamb√©m necess√°rio que cada emissor complete o processo de ades√£o de fornecedores FE-AP.  Todos os documentos emitidos ficam dispon√≠veis no portal do ilink, tanto para a entidade emissora como para a entidade recetora.  Nota: No ambiente de testes, deve emitir documentos apenas entre as 2 entidades que receberam acessos. Caso pretenda verificar o funcionamento do envio de documentos para um consumidor final (NIF arbitr√°rio), deve sempre emitir o documento atrav√©s de uma das entidades que receberam acessos.  IMPORTANTE: Para o envio de documentos a entidades p√∫blicas, recomendamos vivamente a implementa√ß√£o dos seguintes aspetos, sob pena de n√£o conseguir integrar os documentos com determinados sistemas:  N√∫mero de compromissoFicheiro PDF original da faturaN√∫mero de encomenda ou requisi√ß√£o (se aplic√°vel)Capital Social do fornecedorEndere√ßo de e-mail do cliente (apenas para as secretarias do Governo Regional da Madeira)Todos os dados da morada do fornecedor (rua, c√≥digo postal, cidade, etc.)GLN do cliente (se aplic√°vel)Possibilidade de reenvio do documento mediante o estado obtido (√∫til para corrigir e reenviar um documento previamente rejeitado)  ","version":"Next","tagName":"h2"},{"title":"Assinatura digital‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#assinatura-digital","content":" O ilink permite assinar automaticamente os anexos dos documentos emitidos (XML e PDF), desde que a entidade emissora tenha adquirido e configurado um selo de um dos provedores de assinaturas digitais qualificadas. Atualmente, apenas o GTS - Global Trusted Sign √© suportado, mas existem planos para suportar os restantes provedores em Portugal.  Isto significa que o ERP n√£o √© obrigado a integrar com um provedor de assinaturas, podendo delegar (opcionalmente) o processo de certifica√ß√£o ao ilink. A alternativa ser√° o pr√≥prio ERP efetuar o processo de certifica√ß√£o e enviar os documentos j√° assinados para o ilink.  Nota: No cen√°rio de assinatura via ilink, por defeito, todos os ficheiros resultantes s√£o assinados no momento de entrada (xml e pdf), sendo posteriormente enviados ao cliente. Este comportamento pode ser alterado, permitindo definir que ficheiros s√£o assinados. Para mais informa√ß√µes, consulte a se√ß√£o sobre o consumo de assinaturas.  No caso de assinatura via ERP, a assinatura digital do documento √© sempre validada criptograficamente para todos os documentos que entram no sistema. Um documento com assinatura inv√°lida, tanto no XML como no PDF, n√£o integrar√° e retornar√° sempre um erro via API como o seguinte:  HTTP status: 400 Bad request { &quot;success&quot;: false, &quot;errors&quot;: { &quot;document&quot;: { &quot;code&quot;: &quot;e217&quot;, &quot;msg&quot;: &quot;A assinatura do documento n√£o √© v√°lida.&quot; } } }   O erro anterior indica que o documento sofreu altera√ß√µes desde o momento da assinatura, ou que a assinatura foi gerada incorretamente. O seguinte validador pode ser utilizado para verificar a validade da assinatura dos documentos. Os formatos de assinatura reconhecidos pelo ilink s√£o PADES e PKCS7-B (PDF), ou XMLDSig e XADES-BES (XML).  Nota: Os requisitos legais de assinatura das faturas eletr√≥nicas est√£o dispon√≠veis no Decreto-Lei 28/2019, sec√ß√£o II, artigo 12¬∫.  Nota: O ilink assina os documentos PDF em PADES e os documentos XML em XADES-BES enveloped.  ","version":"Next","tagName":"h2"},{"title":"M√©todos de envio‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#m√©todos-de-envio","content":" Ap√≥s efetuada a autentica√ß√£o com sucesso, estamos em condi√ß√µes de come√ßar a enviar documentos. O API do ilink disponibiliza duas abordagens para o envio de documentos:  ","version":"Next","tagName":"h2"},{"title":"Envio do XML em formato UBL 2.1 CIUS-PT (ou UBL 2.1 PEPPOLBIS3 - Encomendas)‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#envio-do-xml-em-formato-ubl-21-cius-pt-ou-ubl-21-peppolbis3---encomendas","content":" Neste m√©todo, o sistema integrador deve gerar corretamente o ficheiro XML antes de envi√°-lo para o ilink. A eSPap disponibiliza a especifica√ß√£o t√©cnica do formato CIUS-PT aqui.  Todos os ficheiros XML enviados por este m√©todo s√£o validados de acordo com o validador oficial da eSPap, vers√£o 2.1.2, e o API retornar√° um erro caso se verifiquem inconsist√™ncias sint√°ticas. A eSPap disponibiliza um validador Schematron que implementa todas as valida√ß√µes da Norma Europeia EN16931 CIUS e as valida√ß√µes adicionais do CIUS-PT, estando dispon√≠vel online neste link. Se os ficheiros validam sintaticamente no validador online, ent√£o dever√£o validar no ilink, com exce√ß√£o das valida√ß√µes adicionais definidas pelo destinat√°rio do documento.  Nota: Para incluir um ficheiro PDF na fatura eletr√≥nica e consultar outros casos de uso, consulte a sec√ß√£o casos de uso.  Nota: A eSPap tamb√©m disponibiliza v√°rios exemplos do CIUS-PT.  Alguns exemplos de erros no processo de valida√ß√£o XML:  HTTP status: 400 Bad request { &quot;success&quot;: false, &quot;errors&quot;: { &quot;document&quot;: { &quot;code&quot;: &quot;e217&quot;, &quot;msg&quot;: &quot;[BR-CO-25]-Caso o valor a pagar (BT-115) seja positivo, deve indicar a data de vencimento (BT-9) ou a nota da condi√ß√£o de pagamento (BT-20).&quot; } } }   HTTP status: 400 Bad request { &quot;success&quot;: false, &quot;errors&quot;: { &quot;document&quot;: { &quot;code&quot;: &quot;e217&quot;, &quot;msg&quot;: &quot;[DT-CIUS-PT-166]-Amount due for payment (BT-115) = Invoice total amount with VAT (BT-112) -Paid amount (BT-113) +Rounding amount (BT-114), with an acceptance range of 1.00 ‚Ç¨ (it does not mean that this tolerance is accepted by the customer).&quot; } } }   O m√©todo a utilizar para envio do XML √© o POST /apps/documentsUBL. Neste contexto, a chave p√∫blica identifica o emissor do documento e deve corresponder √† chave associada ao NIF do emissor especificado no XML (AccountingSupplierParty&gt;Party&gt;PartyTaxScheme&gt;CompanyID para faturas/notas de cr√©dito, ou AccountingCustomerParty&gt;Party&gt;PartyTaxScheme&gt;CompanyID para encomendas). Caso isto n√£o se verifique, o API retornar√° o seguinte erro:  HTTP status: 400 Bad request { &quot;success&quot;: false, &quot;errors&quot;: { &quot;supplier&quot;: { &quot;code&quot;: &quot;e199&quot;, &quot;msg&quot;: &quot;A entidade criadora do documento deve ser cliente ou fornecedor do novo documento.&quot; } } }   Se o XML for v√°lido e respeitar todas as valida√ß√µes da norma, bem como todas as regras de neg√≥cio adicionais do recetor, o API retorna uma resposta de sucesso, juntamente com os dados principais do documento criado:  HTTP status: 201 Created { &quot;success&quot;: true, &quot;message&quot;: { &quot;code&quot;: &quot;s011&quot;, &quot;msg&quot;: &quot;Documento criado com sucesso&quot; }, &quot;response&quot;: { &quot;data&quot;: { &quot;id&quot;: &quot;60796c3c2a6fa2.53909016&quot;, &quot;number&quot;: &quot;7411111&quot;, &quot;emission_date&quot;: &quot;2021-04-15&quot;, &quot;type_document_fact&quot;: { &quot;id&quot;: &quot;5c9cb870a5ef57.36583702&quot;, &quot;code&quot;: &quot;380&quot;, &quot;alias&quot;: &quot;invoice&quot;, &quot;type&quot;: &quot;FT&quot;, &quot;description&quot;: &quot;Fatura&quot; }, &quot;type_document&quot;: { &quot;alias&quot;: &quot;issued&quot;, &quot;description&quot;: &quot;Emitido&quot; }, &quot;state_document&quot;: { &quot;id&quot;: &quot;5c9cb878745b16.4225687&quot;, &quot;alias&quot;: &quot;sent&quot;, &quot;description&quot;: &quot;Enviado ao cliente.&quot; } } } }   Nota: Um documento √© enviado com sucesso ao destinat√°rio via EDI quando o campo state_document.alias tem o valor sent ou accepted. Caso pretenda apenas que o documento seja enviado via e-mail, o estado do documento deve ser ignorado, devendo consultar alternativamente o registo dos e-mails enviados atrav√©s da consulta de estado.  ","version":"Next","tagName":"h3"},{"title":"Envio dos dados estruturados do documento‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#envio-dos-dados-estruturados-do-documento","content":" Ao adotar esta op√ß√£o, o ERP dispensa a gera√ß√£o completa do XML, ficando o ilink respons√°vel por gerar o XML final. Assim, o ERP necessita apenas de enviar ao ilink todos os dados referentes ao documento. O endpoint a adotar aqui √© o POST /apps/documents    A especifica√ß√£o deste m√©todo √© extensa, pois abrange todos os campos poss√≠veis de uma fatura/encomenda, que est√£o devidamente documentados na especifica√ß√£o. Todos os documentos criados por este endpoint est√£o sujeitos √†s mesmas valida√ß√µes que os documentos enviados pelo m√©todo POST /apps/documentsUBL, ou seja, o XML resultante dos dados inseridos ser√° validado de acordo com o validador oficial da eSPap, que pode ser consultado online neste link, e segundo as regras de neg√≥cio adicionais do recetor do documento, caso existam.  Nota: Para incluir um ficheiro PDF na fatura eletr√≥nica e outras situa√ß√µes habituais, consulte a sec√ß√£o casos de uso.  Nota: √â poss√≠vel enviar v√°rios anexos num documento atrav√©s do campo files[] (ver especifica√ß√£o acima). Contudo, a representa√ß√£o visual do documento (i.e. PDF original da fatura usado na impress√£o) deve ser enviada sempre no campo file, sendo o campo files[] reservado para ficheiros adicionais (notas de encomenda, avisos de despacho, guias de transporte, etc.). Se o emissor do documento tem uma assinatura digital ativa no ilink, todos os anexos ser√£o assinados por defeito, e o consumo de transa√ß√µes ter√° em conta a soma do tamanho ocupado por todos os anexos enviados (√© debitada 1 transa√ß√£o por cada 1MB de anexos enviados).  ","version":"Next","tagName":"h3"},{"title":"Envio do documento‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#envio-do-documento","content":" ","version":"Next","tagName":"h2"},{"title":"Envio via EDI‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#envio-via-edi","content":" Um documento, ap√≥s cria√ß√£o com sucesso por qualquer um dos m√©todos descritos (envio de XML ou envio de dados), ser√° enviado automaticamente ao destinat√°rio por EDI. Contudo, em casos pontuais, este poder√° n√£o ser entregue imediatamente via EDI devido a configura√ß√µes em falta e/ou outras anomalias na plataforma ilink ou no sistema do recetor. Caso isto se verifique, ser√° devolvido um campo to_send_status na resposta do documento para detalhar a situa√ß√£o:  HTTP status: 201 OK { &quot;success&quot;: true, &quot;message&quot;: { &quot;code&quot;: &quot;s011&quot;, &quot;msg&quot;: &quot;Documento criado com sucesso&quot; }, &quot;response&quot;: { &quot;data&quot;: { &quot;id&quot;:&quot;60796c3c2a6fa2.53909016&quot;, &quot;state_document&quot;: { &quot;id&quot;: &quot;5c9cb870f34b16.42025494&quot;, &quot;alias&quot;: &quot;tosend&quot;, &quot;description&quot;: &quot;Por enviar ao cliente.&quot; }, &quot;to_send_status&quot;: { &quot;code&quot;: &quot;sent_connection&quot;, &quot;title&quot;: &quot;Aguardar a aceita√ß√£o de liga√ß√£o com o destinat√°rio do documento.&quot; } } } }   Nota: Pode verificar que o documento N√ÉO foi entregue via EDI pois o campo state_document.alias assume o valor tosend e o motivo de erro encontra-se descrito no campo to_send_status. Nesta situa√ß√£o, √© necess√°rio primeiro concluir a liga√ß√£o EDI com o destinat√°rio e depois proceder ao reenvio.  Os motivos poss√≠veis (code) para um documento n√£o ser entregue s√£o:  sent_connection, no_connection: Liga√ß√£o com o destinat√°rio em faltaregistered_entity: O destinat√°rio n√£o est√° registado no ilinkreceived_pay_transactions: O destinat√°rio suporta os custos dos documentos recebidos mas n√£o disp√µe de transa√ß√µes suficientes para o envio do documento  Ap√≥s regularizar a situa√ß√£o de erro, ser√° poss√≠vel enviar o documento novamente (ver sec√ß√£o de reenvio de documentos).  Nota: O estado do documento (state_document) √© apenas aplic√°vel a envios EDI. Caso o documento seja apenas enviado para um cliente arbitr√°rio via e-mail (PDF), o estado de envio n√£o reflete o envio do e-mail. Consulte a seguinte sec√ß√£o para mais informa√ß√µes.  ","version":"Next","tagName":"h3"},{"title":"Envio via e-mail‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#envio-via-e-mail","content":" Um documento, ap√≥s cria√ß√£o com sucesso (HTTP status 201) por qualquer um dos m√©todos descritos (envio de XML ou envio de dados), ser√° remetido via e-mail ao destinat√°rio caso seja especificado o campo send_by_email com o valor 1. O(s) endere√ßo(s) do(s) recetor(es) do documento pode(m) ser especificado(s) de 3 formas:  no campo additional_emails[] (em ambos os m√©todos de envio)no campo customer[email] (apenas no m√©todo de envio de dados)no elemento cac:AccountingCustomerParty/cac:Party/cac:Contact/cbc:ElectronicMail do XML (apenas no m√©todo de envio de XML).  Para consultar o envio dos e-mails e leitura dos mesmos pelo cliente, ver sec√ß√£o de consulta de estado de documentos emitidos.  ","version":"Next","tagName":"h3"},{"title":"Cria√ß√£o de documentos e consumo de assinaturas digitais qualificadas‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#cria√ß√£o-de-documentos-e-consumo-de-assinaturas-digitais-qualificadas","content":" Nota: Esta sec√ß√£o √© apenas relevante para clientes que utilizam o ilink para assinar digitalmente os documentos emitidos. Ver detalhes.  Caso esteja configurada uma assinatura digital qualificada no ilink, todos os documentos ser√£o assinados no momento da sua cria√ß√£o, incluindo todos os ficheiros resultantes da fatura eletr√≥nica (xml e pdf). Dado que a assinatura dos documentos n√£o √© obrigat√≥ria por lei em todos os cen√°rios de utiliza√ß√£o, √© poss√≠vel controlar individualmente a assinatura dos ficheiros xml e pdf no momento da cria√ß√£o do documento atrav√©s dos campos disable_xml_sign e disable_pdf_sign, dispon√≠veis em ambos os m√©todos de cria√ß√£o de documento (XML ou dados). Isto permite reduzir o consumo de assinaturas digitais, bem como otimizar o processo de cria√ß√£o de documentos.  Ou seja:  No envio de fatura digital via PDF assinado para um consumidor final ou cliente privado, n√£o ser√° obrigat√≥rio assinar o ficheiro XML resultante, pelo que recomendamos a utiliza√ß√£o do campo disable_xml_sign: 1.No envio de fatura eletr√≥nica para a Administra√ß√£o P√∫blica via EDI (exemplo eSPap), n√£o √© obrigat√≥rio assinar o documento, no entanto √© sempre poss√≠vel assinar ambos os ficheiros por motivos de seguran√ßa adicional e integridade. Se pretende, por exemplo, desativar a assinatura digital do anexo PDF, basta usar a op√ß√£o disable_pdf_sign: 1.Os campos acima descritos apenas t√™m efeito quando o emissor do documento usa uma assinatura digital qualificada no ilink.  ","version":"Next","tagName":"h3"},{"title":"Valida√ß√µes adicionais‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#valida√ß√µes-adicionais","content":" O recetor da fatura pode configurar no ilink requisitos adicionais para determinados campos (regras de neg√≥cio), mesmo quando estes n√£o s√£o obrigat√≥rios na especifica√ß√£o CIUS-PT. Por exemplo, um cliente pode definir que apenas aceita faturas com o ficheiro PDF em anexo ou com o n√∫mero de compromisso especificado. √â fundamental que estes requisitos sejam acordados previamente com o cliente/destinat√°rio antes da entrada em produ√ß√£o, de forma a evitar erros de integra√ß√£o.  Caso o recetor do documento obrigue √† presen√ßa de algum campo n√£o especificado no XML, o API retornar√° um erro como abaixo e o documento n√£o ser√° gerado:  HTTP status: 400 Bad request { &quot;success&quot;: false, &quot;errors&quot;: { &quot;commitment_number&quot;: { &quot;code&quot;: &quot;e048&quot;, &quot;msg&quot;: &quot;O n√∫mero de compromisso √© obrigat√≥rio.&quot; } } }   Note-se que apenas s√£o retornados erros neste formato quando o receptor do documento √© cliente ilink e tem as devidas regras de neg√≥cio configuradas na plataforma. Quando um documento √© enviado a um sistema EDI externo, qualquer falha no processo de valida√ß√£o √© normalmente comunicada num momento futuro via altera√ß√£o de estado para Rejeitado, com a devida mensagem de erro. √â importante notar que nem todos os sistemas EDI suportam envio de mensagens de estado.  ","version":"Next","tagName":"h2"},{"title":"Criar/editar documento‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#criareditar-documento","content":" Um documento pode ser editado e reenviado ao destinat√°rio:  se ainda n√£o foi enviado ao cliente finalou se j√° foi enviado ao cliente e o cliente pediu uma regulariza√ß√£o  Em termos pr√°ticos, a possibilidade de reenvio pode ser consultada atrav√©s do seguinte campo de resposta do documento:  &quot;state_edi_document&quot;: { &quot;alias&quot;: &lt;estado&gt; // estados poss√≠veis de reenvio: 'regularization' ou 'reception' ou 'error' }   Para consultar o estado de um documento, ver sec√ß√£o de consulta de estado de documentos emitidos.  Para editar um documento existente, basta repetir o pedido POST /apps/documentsUBL ou POST /apps/documents com os dados corrigidos, mantendo o n√∫mero, tipo e data de emiss√£o do documento anterior:  HTTP status: 200 OK { &quot;success&quot;: true, &quot;message&quot;: { &quot;code&quot;: &quot;s012&quot;, &quot;msg&quot;: &quot;Documento editado com sucesso&quot; }, &quot;response&quot;: { &quot;data&quot;: { &quot;id&quot;: &quot;60796c3c2a6fa2.53909016&quot;, &quot;number&quot;: &quot;7411111&quot;, &quot;emission_date&quot;: &quot;2021-04-16&quot;, &quot;type_document_fact&quot;: { &quot;id&quot;: &quot;5c9cb870a5ef57.36583702&quot;, &quot;code&quot;: &quot;380&quot;, &quot;alias&quot;: &quot;invoice&quot;, &quot;type&quot;: &quot;FT&quot;, &quot;description&quot;: &quot;Fatura&quot; }, &quot;type_document&quot;: { &quot;alias&quot;: &quot;issued&quot;, &quot;description&quot;: &quot;Emitido&quot; }, &quot;state_document&quot;: { &quot;id&quot;: &quot;5c9cb870f34b16.42025494&quot;, &quot;alias&quot;: &quot;tosend&quot;, &quot;description&quot;: &quot;Por enviar ao cliente.&quot; } } } }   Caso o documento n√£o seja eleg√≠vel para edi√ß√£o (i.e. j√° foi enviado ou foi aceite pelo cliente final), ser√° apresentado um erro ao tentar reenviar:  HTTP status: 400 Bad request { &quot;success&quot;: false, &quot;errors&quot;: { &quot;number&quot;: { &quot;code&quot;: &quot;e200&quot;, &quot;msg&quot;: &quot;Documento j√° existe.&quot; } } }   ","version":"Next","tagName":"h2"},{"title":"Acesso a documentos emitidos‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#acesso-a-documentos-emitidos","content":" Quando um documento √© registado com sucesso, ser√° sempre devolvido um id nas respostas, que o identifica perante o ilink. √â √∫til guardar este identificador para consultas futuras ao documento.  HTTP status: 201 Created { &quot;success&quot;: true, &quot;message&quot;: { &quot;code&quot;: &quot;s011&quot;, &quot;msg&quot;: &quot;Documento criado com sucesso&quot; }, &quot;response&quot;: { &quot;data&quot;: { &quot;id&quot;: &quot;60796c3c2a6fa2.53909016&quot; } } }   O API permite tamb√©m aceder a todos os dados (inclusive ao XML e PDF gerados) de todos os documentos previamente emitidos. Para tal, deve usar o m√©todo GET /apps/documents/{id}. O id recebido na cria√ß√£o do documento deve ser usado como par√¢metro aqui para aceder ao documento em quest√£o.  Todos os dados retornados por este m√©todo est√£o dispon√≠veis na especifica√ß√£o.  Nota: Caso a entidade emissora do documento tenha configurado a assinatura autom√°tica de documentos no ilink, os URLs de acesso ao XML e ao PDF j√° retornam os ficheiros assinados.  ","version":"Next","tagName":"h2"},{"title":"Consulta de documentos emitidos no portal (opcional)‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#consulta-de-documentos-emitidos-no-portal-opcional","content":" Os documentos podem tamb√©m ser consultados no portal de testes do ilink usando as credenciais das entidades que foram fornecidas. Aqui pode validar visualmente se a informa√ß√£o apresentada est√° coerente com os dados enviados via API:    Para aceder aos anexos de um documento, deve aceder ao documento da tabela e clicar no √≠cone da lupa:    Nota: Os documentos dever√£o estar presentes tanto na entidade emissora (sec√ß√£o de documentos emitidos), como na entidade recetora (sec√ß√£o de documentos recebidos).  ","version":"Next","tagName":"h2"},{"title":"Consulta de estado de documentos emitidos‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#consulta-de-estado-de-documentos-emitidos","content":" √â tamb√©m poss√≠vel aceder ao estado atual dos documentos previamente emitidos. Esta opera√ß√£o permite ao emissor do documento consultar se o documento foi aceite pelo cliente, ou se est√° pendente de reenvio/regulariza√ß√£o, bem como os motivos que levaram a tal.  ","version":"Next","tagName":"h2"},{"title":"Consulta de estado de documento enviado via EDI‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#consulta-de-estado-de-documento-enviado-via-edi","content":" O ilink contempla 4 estados simplificados de documento na propriedade state_document:  Por enviar (tosend) - o documento n√£o foi enviado ao cliente. Provavelmente significa que falta alguma configura√ß√£o no ilink, emissor/recetor n√£o autorizam liga√ß√£o entre eles, ou que alguma das entidades presentes no documento n√£o tem transa√ß√µes suficientes para proceder ao envio. Se apenas se pretende que o documento seja remetido via email, este estado deve ser ignorado.Enviado (sent) - o documento foi enviado ao cliente e est√° pendente de aceita√ß√£o. Note-se que nem todos os sistemas dos destinat√°rios suportam a comunica√ß√£o de estados, pelo que alguns documentos poder√£o nunca sair deste estado.Aceite (accepted) - o documento foi enviado e o cliente aprovou o documento. Estado final.Recusado (rejected) - o documento foi enviado e o cliente rejeitou o mesmo devido a uma incoer√™ncia. O motivo de recusa √© disponibilizado na resposta no campo reasons. O documento poder√° ser enviado novamente caso seja solicitada uma regulariza√ß√£o.  Nota: O ilink devolve tamb√©m o estado de processamento EDI do documento (state_edi_document), que √© independente dos estados acima. Para mais informa√ß√£o, consulte o Guia de Transmiss√£o de Documentos FE-AP, p√°gina 7. Contudo, a leitura do estado EDI nem sempre √© relevante para os softwares de fatura√ß√£o.  Existem 3 abordagens para aceder ao estado de um documento previamente emitido: Consulta individual, Webhook de mudan√ßa de estado e Reporte de estados.  Na Consulta individual de estado, basta efetuar a chamada GET /apps/documents/{id}. O id recebido na cria√ß√£o do documento deve ser usado como par√¢metro para aceder ao documento em quest√£o. O estado √© devolvido no campo state_document (ver especifica√ß√£o). Este m√©todo apenas permite consultar o estado de um documento de cada vez, e como tal n√£o √© recomendado para clientes que processam um volume elevado de documentos. No Webhook de mudan√ßa de estado, o ilink tem a iniciativa de informar o emissor do documento sempre que o mesmo muda de estado. Esta √© a op√ß√£o recomendada em termos de desempenho e rapidez, mas pode n√£o ser vi√°vel caso o sistema a integrar perten√ßa a uma rede n√£o exposta publicamente ao ilink. Para mais informa√ß√£o, consulte a sec√ß√£o Webhooks. No Reporte de estados, a aplica√ß√£o integradora tem a iniciativa de consultar os diversos eventos que levaram √†s altera√ß√µes de estado dos documentos emitidos. Para tal, basta efetuar a chamada GET /apps/states-report/documents. Cada evento identifica o documento e o estado alterados. √â poss√≠vel filtrar os eventos retornados por id de documento, n√∫mero de documento, intervalos de datas, entre outros (ver especifica√ß√£o). Este m√©todo permite √† aplica√ß√£o consultar o estado de v√°rios documentos em simult√¢neo. De modo a facilitar a utiliza√ß√£o do reporte de estados, √© adicionalmente disponibilizado o endpoint de leitura de eventos POST /apps/states-report/documents/read, que permite marcar um ou mais ids de evento obtidos anteriormente como lidos. Os eventos marcados como lidos n√£o s√£o retornados novamente no endpoint de reporte de estados, facilitando a consulta futura do m√©todo anterior. Esta op√ß√£o √© uma alternativa escal√°vel para os sistemas que n√£o podem implementar Webhooks.  ","version":"Next","tagName":"h3"},{"title":"Consulta de estado de documento enviado via e-mail‚Äã","type":1,"pageTitle":"Emiss√£o de documentos","url":"/en/docs/integrations/api/issued#consulta-de-estado-de-documento-enviado-via-e-mail","content":" No cen√°rio de envio de documentos por e-mail, √© poss√≠vel consultar o registo de envio e de leitura dos e-mails remetidos ao cliente. Note-se que o estado do documento retornado (state_document) n√£o √© aplic√°vel neste cen√°rio, pois estes documentos por norma n√£o s√£o enviados via EDI, e como tal, o seu estado de envio ser√° habitualmente to_send. Este estado deve ser ignorado a favor das abordagens abaixo descritas:  Na Consulta individual, basta efetuar a chamada GET /apps/documents/{id}. O id recebido na cria√ß√£o do documento deve ser usado como par√¢metro para aceder ao documento em quest√£o. Na resposta, deve aceder √† propriedade emails, que retorna uma lista das mensagens enviadas e o seu estado de rece√ß√£o e leitura. Este m√©todo apenas permite consultar o estado de um documento de cada vez e tem as mesmas limita√ß√µes que a consulta individual de documentos da sec√ß√£o anterior:  HTTP status: 200 OK { &quot;success&quot;: true, &quot;response&quot;: { &quot;data&quot;: { &quot;id&quot;: &quot;60796c3c2a6fa2.53909016&quot;, ... &quot;emails&quot;: [ { &quot;id&quot;: &quot;634672bab0f3b8.40302642&quot;, &quot;b_open&quot;: true, // true caso o email tenha sido lido pelo recetor &quot;b_sent&quot;: true, // true caso o email tenha sido enviado com sucesso &quot;created_at&quot;: &quot;2022-10-12 08:54:34&quot;, // data e hora de envio do email &quot;opened_at&quot;: &quot;2022-10-12 09:14:16&quot;, // data e hora de leitura do email &quot;address&quot;: { &quot;emails&quot;: [&quot;joao.freitas@email.com&quot;], // endere√ßo de envio } } ] } } }   Nota: Alguns clientes de e-mail (Outlook, etc.) podem bloquear o registo de leitura dos e-mails, ficando o b_open a false mesmo que o e-mail tenha sido aberto em algumas situa√ß√µes. O ilink tem tamb√©m a capacidade de detetar se um email foi devolvido pelo servidor de email, ficando respons√°vel por tentativas sucessivas de reenvio ao longo do tempo.  Na Consulta de hist√≥rico de documento √© poss√≠vel consultar todas as altera√ß√µes processuais de um determinado documento. Este hist√≥rico ir√° listar todas as altera√ß√µes de estado que ocorreram no documento por ordem cronol√≥gica, bem como os registos dos envios de e-mail para o destinat√°rio, o que permite um rastreio completo de auditoria. Pode ser acedido atrav√©s de GET /apps/documents/{id}/history. ","version":"Next","tagName":"h3"},{"title":"Casos de uso","type":0,"sectionRef":"#","url":"/en/docs/integrations/api/usecases","content":"","keywords":"","version":"Next"},{"title":"Cria√ß√£o de documentos por envio de dados‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#cria√ß√£o-de-documentos-por-envio-de-dados","content":" ","version":"Next","tagName":"h2"},{"title":"Condi√ß√µes de pagamento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#condi√ß√µes-de-pagamento","content":" payment_terms[note]: 30 dias   ","version":"Next","tagName":"h3"},{"title":"Local de consumo (CPE) nas linhas do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#local-de-consumo-cpe-nas-linhas-do-documento","content":" lines[0][additional_property][0][name]: CPE lines[0][additional_property][0][value]: PT1234567890   ","version":"Next","tagName":"h3"},{"title":"N√∫mero de compromisso no cabe√ßalho do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#n√∫mero-de-compromisso-no-cabe√ßalho-do-documento","content":" commitment_number: 2021/451   ","version":"Next","tagName":"h3"},{"title":"N√∫mero de compromisso nas linhas do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#n√∫mero-de-compromisso-nas-linhas-do-documento","content":" lines[0][commitment][number]: 2021/123 lines[0][commitment][line]: 1   ","version":"Next","tagName":"h3"},{"title":"N√∫mero de encomenda‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#n√∫mero-de-encomenda","content":" references[0][document_type]: order references[0][number]: 1234   ","version":"Next","tagName":"h3"},{"title":"Envio do PDF anexado (UTF-8)‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#envio-do-pdf-anexado-utf-8","content":" file: (binary)   ","version":"Next","tagName":"h3"},{"title":"Outros anexos secund√°rios‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#outros-anexos-secund√°rios","content":" files[0]: (binary) files[1]: (binary)   Nota: O PDF de representa√ß√£o do documento deve ser sempre enviado no campo file.  ","version":"Next","tagName":"h3"},{"title":"Desconto no cabe√ßalho do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#desconto-no-cabe√ßalho-do-documento","content":" discounts_charges[0][type]: false // usar true para encargo discounts_charges[0][reason]: desconto comercial discounts_charges[0][percent]: 23.00 discounts_charges[0][tax_code]: NOR discounts_charges[0][amount]: 8.13 // refere-se ao valor sem imposto (ou seja, este desconto √© de 10.00 EUR ap√≥s a aplica√ß√£o de IVA) discount_amount: 8.13 // refere-se ao total de descontos de cabe√ßalho aplicados ao documento (N√ÉO inclui descontos nas linhas)   ","version":"Next","tagName":"h3"},{"title":"Desconto ou encargo na linha do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#desconto-ou-encargo-na-linha-do-documento","content":" lines[0][discounts_charges][0][type]: false // usar true para encargo lines[0][discounts_charges][0][reason]: desconto comercial // descri√ß√£o textual do desconto lines[0][discounts_charges][0][amount]: 5.00 // refere-se ao valor sem IVA a descontar na linha lines[0][quantity]: 2.000 // quantidade de artigos na linha lines[0][price]: 10.00000000 // pre√ßo unit√°rio do artigo lines[0][amount]: 15.00000000 // o total da linha do documento √© afectado pelo desconto ( (10 * 2) - 5 = 15) lines[0][taxes][0][tax_percent]: 23.000 // taxa de IVA lines[0][taxes][0][tax_amount]: 3.45 // valor do IVA da linha (15 * 0.23) discount_amount: 0.00 // refere-se ao total de descontos de cabe√ßalho aplicados ao documento (N√ÉO inclui descontos nas linhas)   ","version":"Next","tagName":"h3"},{"title":"Desconto no pre√ßo do artigo‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#desconto-no-pre√ßo-do-artigo","content":" lines[0][price_discount][base_amount]: 10.00 // pre√ßo unit√°rio original do artigo antes de aplicar o desconto lines[0][price_discount][amount]: 5.00 // refere-se ao valor sem IVA a descontar no pre√ßo do artigo lines[0][quantity]: 2.000 // quantidade de artigos na linha lines[0][price]: 5.00000000 // pre√ßo do artigo ap√≥s aplica√ß√£o do desconto (10 - 5 = 5) lines[0][amount]: 10.00000000 // o total da linha do documento √© afectado pelo desconto ( (10 - 5) * 2 = 10) lines[0][taxes][0][tax_percent]: 23.000 // taxa de IVA lines[0][taxes][0][tax_amount]: 2.30 // valor do IVA da linha (10 * 0.23) discount_amount: 0.00 // refere-se ao total de descontos de cabe√ßalho aplicados ao documento (N√ÉO inclui descontos nas linhas)   ","version":"Next","tagName":"h3"},{"title":"Reten√ß√£o na fonte‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#reten√ß√£o-na-fonte","content":" withholding_tax[0][type]: IRF withholding_tax[0][tax_amount]: 10.00 // valor da reten√ß√£o withholding_tax[0][description]: Reten√ß√£o IRS withholding_tax_amount: 10.00 // soma de todas as reten√ß√µes do documento   Nota: os totais do documento n√£o s√£o afetados pela reten√ß√£o  ","version":"Next","tagName":"h3"},{"title":"Isen√ß√£o de IVA na linha‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#isen√ß√£o-de-iva-na-linha","content":" lines[0][quantity]: 2.000 // quantidade lines[0][price]: 5.00000000 // pre√ßo unit√°rio lines[0][amount]: 10.00000000 // total da linha sem IVA lines[0][taxes][0][tax_percent]: 0.00 // taxa de IVA lines[0][taxes][0][tax_amount]: 0.00 // valor do IVA da linha lines[0][taxes][0][tax_exemption_reason_code]: M08 // c√≥digo de motivo da AT lines[0][taxes][0][tax_exemption_reason]: IVA - Autoliquida√ß√£o // descritivo do motivo da AT   ","version":"Next","tagName":"h3"},{"title":"Isen√ß√£o de IVA no desconto ou encargo de cabe√ßalho‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#isen√ß√£o-de-iva-no-desconto-ou-encargo-de-cabe√ßalho","content":" discounts_charges[0][type]: false // usar true para encargo discounts_charges[0][reason]: desconto comercial // descritivo discounts_charges[0][percent]: 0.00 // percentagem (isento) discounts_charges[0][tax_code]: ISE // isento discounts_charges[0][amount]: 10.00 // valor do desconto discounts_charges[0][tax_exemption_reason]: M08 // c√≥digo de motivo da AT discounts_charges[0][tax_exemption_reason_code]: IVA - Autoliquida√ß√£o // descritivo do motivo da AT   ","version":"Next","tagName":"h3"},{"title":"Envio da fatua por e-mail a um ou mais endere√ßos‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#envio-da-fatua-por-e-mail-a-um-ou-mais-endere√ßos","content":" send_by_email: 1, customer[email]: endereco1@email.com // enviado sempre para o email especificado no cliente additional_emails[0]: endereco2@email.com // tamb√©m enviado para a lista adicional de endere√ßos additional_emails[1]: endereco3@email.com   ","version":"Next","tagName":"h3"},{"title":"Envio de c√≥digo QR‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#envio-de-c√≥digo-qr","content":" qr_code: A:500000000*B:123456789*C:PT*D:GT*E:N*F:20190720*G:GT G234CB/50987*H:GTVX4Y8B-50987*I1:0*N:0.00*O:0.00*Q:5uIg*R:9999   ","version":"Next","tagName":"h3"},{"title":"Cria√ß√£o de documentos por envio do CIUS-PT‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#cria√ß√£o-de-documentos-por-envio-do-cius-pt","content":" Note-se que a ordem dos elementos XML √© relevante e afecta as valida√ß√µes no formato UBL. Recomenda-se a leitura do guia de modelo de dados sem√¢nticos do formato CIUS-PT aqui.  ","version":"Next","tagName":"h2"},{"title":"N√∫mero de compromisso no cabe√ßalho do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#n√∫mero-de-compromisso-no-cabe√ßalho-do-documento-1","content":" &lt;Invoice&gt; ... &lt;cbc:AccountingCost&gt;2021/156&lt;/cbc:AccountingCost&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Capital Social do fornecedor‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#capital-social-do-fornecedor","content":" &lt;Invoice&gt; ... &lt;cac:AccountingSupplierParty&gt; &lt;cac:PartyLegalEntity&gt; &lt;cbc:CompanyLegalForm&gt;2.000.000 EUR&lt;/cbc:CompanyLegalForm&gt; &lt;/cac:PartyLegalEntity&gt; &lt;/cac:AccountingSupplierParty&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"GLN do cliente (usar o schemeID 0088)‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#gln-do-cliente-usar-o-schemeid-0088","content":" &lt;Invoice&gt; ... &lt;cac:AccountingCustomerParty&gt; &lt;cbc:EndpointID schemeID=&quot;0088&quot;&gt;123456789&lt;/cbc:EndpointID&gt; &lt;/cac:AccountingCustomerParty&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"ATCUD e QRCODE‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#atcud-e-qrcode","content":" &lt;Invoice&gt; ... &lt;cac:AdditionalDocumentReference&gt; &lt;cbc:ID schemeID=&quot;ANG&quot;&gt;AFHOFX-22&lt;/cbc:ID&gt; &lt;!-- Valor ATCUD --&gt; &lt;cbc:DocumentDescription&gt;QR_CODE&lt;/cbc:DocumentDescription&gt; &lt;cac:Attachment&gt; &lt;!-- Texto do QRCODE, em base64 (da sequ√™ncia de carateres, N√ÉO da imagem) --&gt; &lt;cbc:EmbeddedDocumentBinaryObject mimeCode=&quot;text/plain&quot; filename=&quot;QR_CODE.txt&quot;&gt;UVJDT0RF=&lt;/cbc:EmbeddedDocumentBinaryObject&gt; &lt;/cac:Attachment&gt; &lt;/cac:AdditionalDocumentReference&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"M√©todo de pagamento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#m√©todo-de-pagamento","content":" &lt;Invoice&gt; ... &lt;cac:PaymentMeans&gt; &lt;cbc:PaymentMeansCode&gt;NU&lt;/cbc:PaymentMeansCode&gt; &lt;/cac:PaymentMeans&gt; &lt;/Invoice&gt;   Valores permitidos:  C√≥digo\tDescri√ß√£oCC\tCart√£o cr√©dito CD\tCart√£o d√©bito CH\tCheque banc√°rio CI\tCr√©dito document√°rio internacional CO\tCheque ou cart√£o oferta CS\tCompensa√ß√£o de saldos em conta corrente DE\tDinheiro eletr√≥nico (ex.: cart√µes de fidelidade ou pontos) LC\tLetra comercial MB\tRefer√™ncias de pagamento para Multibanco NU\tNumer√°rio OU\tOutros meios n√£o assinalados PR\tPermuta de bens TB\tTransfer√™ncia banc√°ria ou d√©bito direto autorizado TR\tT√≠tulos de compensa√ß√£o extrassalarial (ex.: refei√ß√£o, educa√ß√£o, etc.)  ","version":"Next","tagName":"h3"},{"title":"Informa√ß√µes de pagamento de cart√£o de d√©bito ou cr√©dito‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#informa√ß√µes-de-pagamento-de-cart√£o-de-d√©bito-ou-cr√©dito","content":" &lt;Invoice&gt; ... &lt;cac:PaymentMeans&gt; &lt;cbc:PaymentMeansCode&gt;CC&lt;/cbc:PaymentMeansCode&gt; &lt;cac:CardAccount&gt; &lt;cbc:PrimaryAccountNumberID&gt;4211456651233545687&lt;/cbc:PrimaryAccountNumberID&gt; &lt;!-- N√∫mero da conta --&gt; &lt;cbc:NetworkID&gt;04256&lt;/cbc:NetworkID&gt; &lt;!-- Identificador da rede banc√°ria --&gt; &lt;cbc:HolderName&gt;Jo√£o Ferreira&lt;/cbc:HolderName&gt; &lt;!-- Nome do titular --&gt; &lt;/cac:CardAccount&gt; &lt;/cac:PaymentMeans&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"M√©todo de pagamento por transfer√™ncia banc√°ria‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#m√©todo-de-pagamento-por-transfer√™ncia-banc√°ria","content":" &lt;Invoice&gt; ... &lt;cac:PaymentMeans&gt; &lt;cbc:PaymentMeansCode&gt;TB&lt;/cbc:PaymentMeansCode&gt; &lt;cac:PayeeFinancialAccount&gt; &lt;cbc:ID&gt;PT50000700230012345667899&lt;/cbc:ID&gt; &lt;!-- IBAN--&gt; &lt;cbc:Name&gt;Jo√£o&lt;/cbc:Name&gt; &lt;!-- Nome do titular --&gt; &lt;cac:FinancialInstitutionBranch&gt; &lt;cbc:ID&gt;NBxxxx&lt;/cbc:ID&gt; &lt;!--SWIFT --&gt; &lt;/cac:FinancialInstitutionBranch&gt; &lt;/cac:PayeeFinancialAccount&gt; &lt;/cac:PaymentMeans&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"M√©todo de pagamento por refer√™ncia multibanco‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#m√©todo-de-pagamento-por-refer√™ncia-multibanco","content":" &lt;Invoice&gt; ... &lt;cac:PaymentMeans&gt; &lt;cbc:PaymentMeansCode name=&quot;#DESCRIPTION@ATMPAYMENT#156.22#&quot;&gt;#ENTITY@ATMPAYMENT#15652&lt;/cbc:PaymentMeansCode&gt; &lt;!-- Entidade e Valor --&gt; &lt;cbc:PaymentID&gt;#REFERENCE@ATMPAYMENT#156555145#&lt;/cbc:PaymentID&gt; &lt;!-- Refer√™ncia --&gt; &lt;/cac:PaymentMeans&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Segunda refer√™ncia multibanco‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#segunda-refer√™ncia-multibanco","content":" &lt;Invoice&gt; ... &lt;cbc:Note&gt;#ENTITY@ATMPAYMENT-001#12345#&lt;/cbc:Note&gt; &lt;!-- 2¬™ entidade --&gt; &lt;cbc:Note&gt;#REFERENCE@ATMPAYMENT-001#012345678#&lt;/cbc:Note&gt; &lt;!-- 2¬™ refer√™ncia --&gt; &lt;cbc:Note&gt;#AMOUNT@ATMPAYMENT-001#3264.10#&lt;/cbc:Note&gt; &lt;!--Valor da 2¬™ refer√™ncia --&gt; &lt;cbc:Note&gt;#DESCRIPTION@ATMPAYMENT-001#Valor total do documento, mais valores em atraso#&lt;/cbc:Note&gt; &lt;!-- Descri√ß√£o da 2¬™ refer√™ncia --&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Condi√ß√µes de pagamento:‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#condi√ß√µes-de-pagamento-1","content":" &lt;Invoice&gt; ... &lt;PaymentTerms&gt; &lt;cbc:Note&gt;30 dias&lt;/cbc:Note&gt; &lt;/PaymentTerms&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Nota textual no cabe√ßalho do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#nota-textual-no-cabe√ßalho-do-documento","content":" &lt;Invoice&gt; ... &lt;cbc:Note&gt;Nota cabe√ßalho&lt;/cbc:Note&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Nota textual nas linhas do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#nota-textual-nas-linhas-do-documento","content":" &lt;Invoice&gt; ... &lt;InvoiceLine&gt; &lt;cbc:Note&gt;Nota linha&lt;/cbc:Note&gt; &lt;/InvoiceLine&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Propriedade adicional no documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#propriedade-adicional-no-documento","content":" &lt;Invoice&gt; ... &lt;cbc:Note&gt;#ADDITIONALPROPERTY#VOUCHER#123#&lt;/cbc:Note&gt; &lt;Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Local de consumo (CPE) nas linhas do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#local-de-consumo-cpe-nas-linhas-do-documento-1","content":" &lt;cac:InvoiceLine&gt; ... &lt;cac:AdditionalItemProperty&gt; &lt;cbc:Name&gt;CPE&lt;/cbc:Name&gt; &lt;cbc:Value&gt;PT1234567890&lt;/cbc:Value&gt; &lt;/cac:AdditionalItemProperty&gt; &lt;/cac:InvoiceLine&gt;   ","version":"Next","tagName":"h3"},{"title":"N√∫mero de encomenda / n√∫mero de requisi√ß√£o‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#n√∫mero-de-encomenda--n√∫mero-de-requisi√ß√£o","content":" &lt;Invoice&gt; ... &lt;cac:OrderReference&gt; &lt;cbc:ID&gt;20159854587&lt;/cbc:ID&gt; &lt;/cac:OrderReference&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"N√∫mero de compromisso nas linhas do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#n√∫mero-de-compromisso-nas-linhas-do-documento-1","content":" &lt;cac:InvoiceLine&gt; &lt;cbc:AccountingCost&gt;2020/123&lt;/cbc:AccountingCost&gt; &lt;!-- n√∫mero do compromisso da linha --&gt; ... &lt;cac:Item&gt; &lt;cac:AdditionalItemProperty&gt; &lt;cbc:Name&gt;#LINEID@COMMITMENTLINEREFERENCE#&lt;/cbc:Name&gt; &lt;cbc:Value&gt;1&lt;/cbc:Value&gt; &lt;!-- n√∫mero da linha --&gt; &lt;/cac:AdditionalItemProperty&gt; &lt;/cac:Item&gt; &lt;/cac:InvoiceLine&gt;   ","version":"Next","tagName":"h3"},{"title":"PDF anexado‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#pdf-anexado","content":" Nota: o conte√∫do deve estar codificado em base64  &lt;Invoice&gt; ... &lt;cac:AdditionalDocumentReference&gt; &lt;cbc:ID&gt;1&lt;/cbc:ID&gt; &lt;cbc:DocumentDescription&gt;INVOICE_REPRESENTATION&lt;/cbc:DocumentDescription&gt; &lt;cac:Attachment&gt; &lt;cbc:EmbeddedDocumentBinaryObject mimeCode=&quot;application/pdf&quot; filename=&quot;document&quot;&gt;JVBERi0xLjUNCiW1tbW1DQoxIDAgb2JqDQo8PC9UeXBlL0NhdGFsb2cvUGIvTGF== &lt;/cbc:EmbeddedDocumentBinaryObject&gt; &lt;/cac:Attachment&gt; &lt;/cac:AdditionalDocumentReference&gt; &lt;/Invoice&gt;   Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"M√∫ltiplos PDFs anexados‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#m√∫ltiplos-pdfs-anexados","content":" &lt;Invoice&gt; ... &lt;cac:AdditionalDocumentReference&gt; &lt;cbc:ID&gt;1&lt;/cbc:ID&gt; &lt;!-- O anexo principal deve ter a descri√ß√£o INVOICE_REPRESENTATION', ou 'CREDITNOTE_REPRESENTATION' --&gt; &lt;cbc:DocumentDescription&gt;INVOICE_REPRESENTATION&lt;/cbc:DocumentDescription&gt; &lt;cac:Attachment&gt; &lt;cbc:EmbeddedDocumentBinaryObject mimeCode=&quot;application/pdf&quot; filename=&quot;document.pdf&quot;&gt;JVBERi0xLjUNCiW1tbW1DQoxIDAgb2JqDQo8PC9UeXBlL0NhdGFsb2cvUGIvTGF== &lt;/cbc:EmbeddedDocumentBinaryObject&gt; &lt;/cac:Attachment&gt; &lt;/cac:AdditionalDocumentReference&gt; &lt;cac:AdditionalDocumentReference&gt; &lt;cbc:ID&gt;2&lt;/cbc:ID&gt; &lt;!-- Os anexos secund√°rios (como a nota de encomenda, guias de pagamento, etc.) devem ter a descri√ß√£o 'ATTACHMENT'. √â poss√≠vel incluir v√°rios ATTACHMENTs num documento. --&gt; &lt;cbc:DocumentDescription&gt;ATTACHMENT&lt;/cbc:DocumentDescription&gt; &lt;cac:Attachment&gt; &lt;cbc:EmbeddedDocumentBinaryObject mimeCode=&quot;application/pdf&quot; filename=&quot;document2.pdf&quot;&gt;jUNCiW1tbW1DQoJVBERi0xLjUNCiW1tbW1DQo8PC9UeXBlL0NhUGIvTGF== &lt;/cbc:EmbeddedDocumentBinaryObject&gt; &lt;/cac:Attachment&gt; &lt;/cac:AdditionalDocumentReference&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Outros anexos (QR Code, etc.)‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#outros-anexos-qr-code-etc","content":" Nota: o conte√∫do deve estar codificado em base64  &lt;Invoice&gt; ... &lt;cac:AdditionalDocumentReference&gt; &lt;cbc:ID&gt;2&lt;/cbc:ID&gt; &lt;cbc:DocumentDescription&gt;ATTACHMENT&lt;/cbc:DocumentDescription&gt; &lt;!-- usar QR_CODE para o c√≥digo QR --&gt; &lt;cac:Attachment&gt; &lt;cbc:EmbeddedDocumentBinaryObject mimeCode=&quot;application/txt&quot; filename=&quot;document&quot;&gt;JVBERi0xLjUNCiW1tbW1DQoxIDAgb2JqDQo8PC9UeXBlL0NhdGFsb2cvUGIvTGF== &lt;/cbc:EmbeddedDocumentBinaryObject&gt; &lt;/cac:Attachment&gt; &lt;/cac:AdditionalDocumentReference&gt; &lt;/Invoice&gt;   ","version":"Next","tagName":"h3"},{"title":"Desconto ou encargo no cabe√ßalho do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#desconto-ou-encargo-no-cabe√ßalho-do-documento","content":" Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"Desconto ou encargo na linha do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#desconto-ou-encargo-na-linha-do-documento-1","content":" Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"Desconto ou encargo no pre√ßo do artigo‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#desconto-ou-encargo-no-pre√ßo-do-artigo","content":" Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"Reten√ß√£o na fonte‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#reten√ß√£o-na-fonte-1","content":" Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"Isen√ß√£o de IVA na linha do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#isen√ß√£o-de-iva-na-linha-do-documento","content":" Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"Isen√ß√£o de IVA no desconto de cabe√ßalho do documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#isen√ß√£o-de-iva-no-desconto-de-cabe√ßalho-do-documento","content":" Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"M√∫ltiplas isen√ß√µes no documento‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#m√∫ltiplas-isen√ß√µes-no-documento","content":" Ver exemplo  ","version":"Next","tagName":"h3"},{"title":"V√°rios descontos na linha‚Äã","type":1,"pageTitle":"Casos de uso","url":"/en/docs/integrations/api/usecases#v√°rios-descontos-na-linha","content":" Ver exemplo  Consultar lista completa de casos de uso CIUS-PT pela eSPap. ","version":"Next","tagName":"h3"}],"options":{"id":"default"}}