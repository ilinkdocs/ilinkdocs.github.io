"use strict";(self.webpackChunkilink=self.webpackChunkilink||[]).push([[573],{566:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/20210417-111632-7d680ad6761f7607defd035c24e6cf22.png"},1795:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/20210417-111219-88f2f19a5ac787cdbef244dc05f8fb28.png"},1831:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/20210415-103711-9bb262490b5fe4a378b8e4edde60ea70.png"},6367:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"integrations/api/specification","title":"Especifica\xe7\xe3o t\xe9cnica","description":"Documenta\xe7\xe3o Swagger","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/integrations/api/specification.md","sourceDirName":"integrations/api","slug":"/integrations/api/specification","permalink":"/en/docs/integrations/api/specification","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"ilinkSidebar","previous":{"title":"Introdu\xe7\xe3o ao API REST","permalink":"/en/docs/integrations/api/scope"},"next":{"title":"Emiss\xe3o de documentos","permalink":"/en/docs/integrations/api/issued"}}');var a=i(4848),t=i(8453);const o={},r="Especifica\xe7\xe3o t\xe9cnica",c={},d=[{value:"Documenta\xe7\xe3o Swagger",id:"documenta\xe7\xe3o-swagger",level:2},{value:"Autoriza\xe7\xe3o",id:"autoriza\xe7\xe3o",level:2},{value:"Autentica\xe7\xe3o",id:"autentica\xe7\xe3o",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"especifica\xe7\xe3o-t\xe9cnica",children:"Especifica\xe7\xe3o t\xe9cnica"})}),"\n",(0,a.jsx)(n.h2,{id:"documenta\xe7\xe3o-swagger",children:"Documenta\xe7\xe3o Swagger"}),"\n",(0,a.jsxs)(n.p,{children:["O ilink utiliza uma especifica\xe7\xe3o OpenAPI 3 num cliente Swagger, dispon\xedvel ",(0,a.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html",children:"aqui"}),". Neste cliente web, pode efetuar chamadas de teste ao nosso API, analisar as respostas obtidas e verificar os dados a enviar para cada endpoint/m\xe9todo."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"O cliente swagger disponibilizado acima deve acompanhar o seu processo de desenvolvimento."})," \xc9 tamb\xe9m poss\xedvel verificar como as chamadas ao API s\xe3o constru\xeddas atrav\xe9s do ",(0,a.jsx)(n.a,{href:"https://curl.se/",children:"cURL"})," (consulte o exemplo abaixo):"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img info",src:i(1795).A+"",width:"1400",height:"539"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Nota:"})," S\xe3o tamb\xe9m disponibilizados v\xe1rios ",(0,a.jsx)(n.a,{href:"https://ilink.acin.pt/resources/clients.zip",children:"clientes HTTP,"})," em mais de 50 linguagens e frameworks, gerados automaticamente a partir da nossa especifica\xe7\xe3o, que podem servir de suporte inicial ao processo de integra\xe7\xe3o."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"autoriza\xe7\xe3o",children:"Autoriza\xe7\xe3o"}),"\n",(0,a.jsx)(n.p,{children:"Todos os pedidos efetuados ao API devem conter obrigatoriamente o header de autoriza\xe7\xe3o abaixo:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Authorization"}),": Bearer {TOKEN_PLATAFORMA}"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["No cliente ",(0,a.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/",children:"Swagger"}),", o processo de autoriza\xe7\xe3o \xe9 efetuado inserindo o token de plataforma ap\xf3s clicar no bot\xe3o ",(0,a.jsx)(n.strong,{children:"Authorize"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img info",src:i(8629).A+"",width:"1132",height:"384"})}),"\n",(0,a.jsxs)(n.p,{children:["Ap\xf3s esta opera\xe7\xe3o, deve notar que todos os pedidos subsequentes ao API incluem o header ",(0,a.jsx)(n.em,{children:"Authorization"}),":"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img info",src:i(566).A+"",width:"1402",height:"204"})}),"\n",(0,a.jsx)(n.h2,{id:"autentica\xe7\xe3o",children:"Autentica\xe7\xe3o"}),"\n",(0,a.jsxs)(n.p,{children:["Antes de efetuar a primeira consulta ao API do ilink, ",(0,a.jsx)(n.strong,{children:"\xe9 obrigat\xf3rio efetuar uma autentica\xe7\xe3o por cliente/NIF"}),". Esta autentica\xe7\xe3o serve de ",(0,a.jsx)(n.em,{children:"handshake"})," inicial entre o cliente e o ilink e \xe9 efetuada atrav\xe9s do endpoint ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Autentica%C3%A7%C3%A3o/postAuthentications",children:"POST /apps/authentications"})}),":"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img info",src:i(8278).A+"",width:"1485",height:"510"})}),"\n",(0,a.jsx)(n.p,{children:"Uma autentica\xe7\xe3o v\xe1lida deve retornar esta resposta:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'HTTP status: 200 OK\n\n{\n  "success": true,\n  "message": {\n    "code":"e123",\n    "msg":"Integra\xe7\xe3o realizada com sucesso."\n  }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["A autentica\xe7\xe3o tem dura\xe7\xe3o ilimitada (s\xf3 precisa de ser invocada 1 vez por cliente/NIF que acede ao API). Pode tamb\xe9m ser revogada atrav\xe9s do m\xe9todo ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Autentica%C3%A7%C3%A3o/deleteAuthentications",children:"DELETE /apps/authentications"})}),":"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"img info",src:i(1831).A+"",width:"1495",height:"328"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Se o processo de autentica\xe7\xe3o n\xe3o for conclu\xeddo, ou o header Authorization n\xe3o for enviado nos pedidos ao API, todas as chamadas ser\xe3o recusadas para esse NIF com o seguinte erro"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'HTTP status: 401 Unauthorized\n\n{\n  "success": false,\n  "errors": [\n    {\n      "code": "e069",\n      "msg": "Autentica\xe7\xe3o inv\xe1lida"\n    }\n  ]\n}\n'})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Nota: Em ambiente de produ\xe7\xe3o \xe9 necess\xe1rio autenticar novamente cada cliente/NIF."})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8278:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/20210415-103008-471d454f32df88fc66d0645e76b47275.png"},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>r});var s=i(6540);const a={},t=s.createContext(a);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},8629:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/20210415-103308-1912980fe8ad281c1559aadfa9901e69.png"}}]);