"use strict";(self.webpackChunkilink=self.webpackChunkilink||[]).push([[472],{3584:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/20230426-125316-0840655190d4733e042ef2069dda297b.png"},5753:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"integrations/api/received","title":"Receiving documents","description":"Scope","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/integrations/api/received.md","sourceDirName":"integrations/api","slug":"/integrations/api/received","permalink":"/en/docs/integrations/api/received","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"ilinkSidebar","previous":{"title":"Issuing documents","permalink":"/en/docs/integrations/api/issued"},"next":{"title":"Use Cases","permalink":"/en/docs/integrations/api/usecases"}}');var i=t(4848),o=t(8453);const c={},r="Receiving documents",a={},d=[{value:"Scope",id:"scope",level:2},{value:"Receiving methods",id:"receiving-methods",level:2},{value:"Manual document consultation",id:"manual-document-consultation",level:3},{value:"Incoming webhook (recommended)",id:"incoming-webhook-recommended",level:3},{value:"Import and acceptance",id:"importa\xe7\xe3o-e-aceita\xe7\xe3o",level:2},{value:"Process States (optional)",id:"process-states-optional",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"receiving-documents",children:"Receiving documents"})}),"\n",(0,i.jsx)(n.h2,{id:"scope",children:"Scope"}),"\n",(0,i.jsx)(n.p,{children:"This feature allows automatic entry of invoicing documents into the recipient's ERP, simplifying integration into accounting systems. It also allows the issuer to be notified of the document's acceptance and integration state (paid, accepted, rejected, etc.)."}),"\n",(0,i.jsx)(n.p,{children:"In this integration workflow, the following points must be implemented:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data reading and processing"}),": Extract information from XML or other structured data in the document to record it correctly in the ERP"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Integration state communication"}),": Inform ilink of the outcome of the document integration process"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Acceptance state management"}),": Communicate the acceptance status of the document, including detailed messages in case of error or rejection"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"receiving-methods",children:"Receiving methods"}),"\n",(0,i.jsxs)(n.p,{children:["Allows you to view and integrate documents into the system. Receiving can be made in two ways: ",(0,i.jsx)(n.strong,{children:"Manual document viewing"})," or ",(0,i.jsx)(n.strong,{children:"Incoming webhook"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"manual-document-consultation",children:"Manual document consultation"}),"\n",(0,i.jsxs)(n.p,{children:["In this mode, you must access the endpoint ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Documentos/getDocuments",children:"GET /apps/documents"})}),". You can specify search parameters to filter the results. The response includes the main data from the documents and pagination information through the properties ",(0,i.jsx)(n.code,{children:"rows"})," (number of elements per page) and ",(0,i.jsx)(n.code,{children:"page"})," (page number)."]}),"\n",(0,i.jsxs)(n.p,{children:["To view the details of a document and access the XML and PDF files, use the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Documentos/getDocument",children:"GET /apps/documents/{id}"})})," method, using one of the ",(0,i.jsx)(n.code,{children:"id"}),"s obtained in the previous list."]}),"\n",(0,i.jsx)(n.p,{children:"The endpoint can be called periodically (background process) or by user action in the system (in real time)."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," The public key used here corresponds to the entity receiving the documents. The key that identifies who accesses the received documents must be used."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important:"})," Excessive use of this endpoint should be avoided. Too many calls may result in timeouts or access restrictions, in accordance with the interoperability agreement."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"incoming-webhook-recommended",children:"Incoming webhook (recommended)"}),"\n",(0,i.jsxs)(n.p,{children:["Neste modo, o ilink notifica o ERP sempre que chega um novo documento, dispensando consultas frequentes ao endpoint ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Documentos/getDocuments",children:"GET /apps/documents"})}),". Para mais informa\xe7\xe3o, ver a sec\xe7\xe3o ",(0,i.jsx)(n.a,{href:"/docs/integrations/webhooks/intro",children:"Webhooks"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Document data is sent in a structured format, including public URLs for accessing the XML and PDF files."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"importa\xe7\xe3o-e-aceita\xe7\xe3o",children:"Import and acceptance"}),"\n",(0,i.jsx)(n.p,{children:"After retrieving the document, the ERP must inform iLink of the processing status, i.e. whether it was successfully integrated or requires corrections. Two steps are required:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Communicate the document state"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Done via ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Documentos/postDocumentsAccepted",children:"POST /apps/documents/{id}/accepted"})}),", indicating whether the document was accepted or not and, in case of rejection, the reason"]}),"\n",(0,i.jsx)(n.li,{children:"A rejection reason must be provided if the document is not accepted"}),"\n",(0,i.jsx)(n.li,{children:"A rejected document may be resent by the issuer with corrected data"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Communicate the document import (only if accepted)"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If the previous step indicated acceptance, the method ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Documentos/postDocuments",children:"POST /apps/documents/{id}"})})," must be called"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Rejected documents must not be imported."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Correct communication of accepted/imported documents ensures an audit trail and facilitates API consumption. If manual consultation is being used, documents already rejected or imported will not be returned in future calls. ",(0,i.jsxs)(n.strong,{children:["In other words, the endpoint ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Documentos/getDocuments",children:"GET /apps/documents"})})," does not return documents that have previously been rejected or imported"]}),"."]}),"\n",(0,i.jsx)(n.p,{children:"The image below shows how the operations performed by the ERP are recorded in the iLink portal:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img info",src:t(3584).A+"",width:"1468",height:"500"})}),"\n",(0,i.jsx)(n.p,{children:"Proper use of document import also generates queryable information for the document issuer, confirming its integration with the recipient\u2019s system."}),"\n",(0,i.jsx)(n.h2,{id:"process-states-optional",children:"Process States (optional)"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Optional feature for information purposes only. It does not affect document reception."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"ilink allows the creation of custom document states. When enabled, it is possible to consult and modify a document\u2019s state via API. This capability allows external systems (e.g. document management) to update the process state in an integrated way, and is useful for synchronising internal organisational processes across systems. All process state changes are recorded in the document\u2019s history."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important:"})," The process state is independent of the base state (received, accepted, etc.). It serves only for internal organisation and operational logging."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["To view the available states, use ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Estados%20de%20processamento%20de%20documentos/getProcessStates",children:"GET /apps/processstates"})}),", which returns the complete list with the corresponding ",(0,i.jsx)(n.code,{children:"identification_code"}),".\r\nTo change a document\u2019s state, use ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://ilink.acin.pt/swagger-ui/dist/index.html#/Estados%20de%20processamento%20de%20documentos/postDocumentsProcessState",children:"PUT /apps/documents/{id}/processstates"})}),", specifying the new ",(0,i.jsx)(n.code,{children:"identification_code"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Configuration of the process states to be used is carried out by the ilink support team."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>r});var s=t(6540);const i={},o=s.createContext(i);function c(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);